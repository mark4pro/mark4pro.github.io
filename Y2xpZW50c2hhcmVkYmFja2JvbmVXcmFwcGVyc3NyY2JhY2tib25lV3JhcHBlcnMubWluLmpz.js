/** Copyright (c) 2016 WIMI5. All rights reserved. */ (function(){var f=this;function g(a){a=a.split(".");var c=f;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)c=c[e]?c[e]:c[e]={}}Math.random();g("PENGO.client.shared.backboneWrappers.viewsManager");
window.PENGO.client.shared.backboneWrappers.viewsManager.resolve=function(){function a(){this.a={};this.callbacks=[]}var c,e;a.prototype={b:"_viewId=",c:function(b){if(!b.options.viewsMgr||!(b.options.viewsMgr instanceof a))throw new c("View "+b+" must have a reference to a ViewManager in a 'viewsMgr' property",e.NOT_FOUND);if(void 0===b.model.id)throw new c(b+"PengoView's model must have a defined id, it's not added",e.NOT_FOUND);if(this.a[b.model.id+a.prototype.b+b.cid])throw new c("View "+b+" with id '"+
b.model.id+a.prototype.b+b.cid+"' already added to the view manager "+this.name,e.ALREADY_SET);this.a[b.model.id+a.prototype.b+b.cid]=b;for(var d in this.callbacks)this.callbacks[d](b)},d:function(b,d){delete this.a[b+a.prototype.b+d]},h:function(b,d){return this.a[b+a.prototype.b+d]},l:function(b){for(var d in this.a)d.split(a.prototype.b)[0]===b&&delete this.a[d]},i:function(b){var d=[],c;for(c in this.a)c.split(a.prototype.b)[0]===b&&d.push(this.a[c]);return d},g:function(){var a=[],d;for(d in this.a)a.push(this.a[d]);
return a},e:function(a){this.callbacks.push(a);return this},f:function(a){for(var d=0;d<a.length;d++)this.callbacks.push(callback);return this},k:function(a){this.callbacks.pop(a);return this}};a.prototype.addView=a.prototype.c;a.prototype.removeView=a.prototype.d;a.prototype.getView=a.prototype.h;a.prototype.removeViews=a.prototype.l;a.prototype.getViews=a.prototype.i;a.prototype.getAllViews=a.prototype.g;a.prototype.addCallback=a.prototype.e;a.prototype.addCallbacks=a.prototype.f;a.prototype.removeCallback=
a.prototype.k;return{dependencies:function(a){c=a.pengoError.pengoError.PengoError;e=a.pengoError.codes.codes},implementation:{ViewsManager:a}}};g("PENGO.client.shared.backboneWrappers.pengoView");
window.PENGO.client.shared.backboneWrappers.pengoView.resolve=function(){var a,c,e,b=Backbone.View.extend({firstRender:function(){if(!this.model||!(this.model instanceof e.pengoModel.PengoModel))throw new a("PENGO view's model must be a PENGO model",c.INVALID_TYPE);if(!this.options.viewsMgr||!(this.options.viewsMgr instanceof e.viewsManager.ViewsManager))throw new a("PENGO view must have a reference to a view manager in a 'viewsMgr' property",c.INVALID_TYPE);this.render();this.options.viewsMgr.c(this)},
remove:function(){this.options.viewsMgr.d(this.model.id,this.cid);Backbone.View.prototype.remove.call(this)},addControllerCallback:function(d,b,e){if(!this[d]||!this[d]instanceof Function)throw new a(d+" is not a valid Function name",c.INVALID_TYPE);if(e&&(!(e instanceof Object)||e instanceof Array))throw new a("'If defined, 'params' parameter must be an Object instance",c.INVALID_TYPE);this.controllerCallbacks||(this.controllerCallbacks={});this.controllerCallbacks[d]||(this.controllerCallbacks[d]=
[]);this.controllerCallbacks[d].push({fn:b,j:e});this[d](b,e)},addControllerCallbacks:function(){var a=this.controllerCallbacks;this.controllerCallbacks={};for(var b in a)for(var c in a[b])this.addControllerCallback(b,a[b][c].fn,a[b][c].j)}});b.extend=function(a){for(var b in a);return Backbone.View.extend.call(this,a)};return{dependencies:function(b){a=b.pengoError.pengoError.PengoError;c=b.pengoError.codes.codes;e=b.bbWrappers},implementation:{PengoView:b}}};g("PENGO.client.shared.backboneWrappers.pengoModel");window.PENGO.client.shared.backboneWrappers.pengoModel.resolve=function(){return{dependencies:void 0,implementation:{PengoModel:Backbone.Model.extend({idAttribute:"_id"})}}};})();
