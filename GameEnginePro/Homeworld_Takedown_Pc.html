<!DOCTYPE html>
<html>
<head>
<title>Homeworld Takedown V0.4.4</title>
<style>
canvas {
border:2px solid black;
background-color: blue;
border-radius: 25px;
box-shadow: 2px 2px 5px lightblue;
margin-left: auto;
margin-right: auto;
display: block;
width: 600px;
}
 body {
 background-image: url("https://mark4pro.github.io/GameEnginePro/image/uitexture.png");
 }
 button{
 width:80px;
 height:80px;
 border-radius: 50px;
 background-image: url("https://mark4pro.github.io/GameEnginePro/image/healthback.png");
 color: white;
 text-align: center;
 }
 h1 {
 font-size: 50px;
 background-image: url("https://mark4pro.github.io/GameEnginePro/image/healthback.png");
 border:5px solid darkgray;
 visibility: visible; 
 z-index: 200; 
 }
 p {
 color: white;
 }
 .unselectable {
-webkit-user-select: none; /* Safari 3.1+ */
-moz-user-select: none; /* Firefox 2+ */
-ms-user-select: none; /* IE 10+ */
user-select: none; /* Standard syntax */
}
#container {
width : 50%;
height : 50%;
overflow : hidden;
padding : 0;
margin : 0;
-webkit-user-select : none;
-moz-user-select : none;
}

</style>
<!-- Were Images Go -->
<img id="playerimg" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/player1.png">
<img id="badguy1img" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/enemy.png">
<img id="uiimg" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/uitexture.png">
<img id="healthbo" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/healthborder.png">
<img id="healthba" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/healthback.png">
<img id="wave1t5" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/wave1-5.png">
<img id="bullpic" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/bullet.png">
<img id="ammopic1" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/ammocrate1pic.png">
<img id="healthpic1" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/healthcrate1pic.png">
<img id="menupic" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/menu.png">
<img id="triimgleft" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/tri-enemy-left.png">
<img id="triimgright" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/tri-enemy-right.png">
<img id="1-5platform" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/platform1_1.PNG">
<img id="1-5sideborder" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/1-5border1.png">
<img id="housefloor1" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/floor1_1.png">
<img id="houseroof1" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/roof1_1.png">
<img id="tree" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/tree1_1.png">
<img id="wave5t7" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/wave5-7_1.png">
<img id="DeathScr" width="0" height="0" src="https://mark4pro.github.io/GameEnginePro/image/DeathScreen.png">

<!-- Were Sounds Go -->
		<audio id="level1" src="https://mark4pro.github.io/GameEnginePro/audio/level1.mp3"></audio>
	    <audio id="level2" src="https://mark4pro.github.io/GameEnginePro/audio/level2.mp3"></audio>
</head>
<body onload="start()">
<script>
var w = window.innerWidth;
var h = window.innerHeight;
var playerX = 100;
var playerY = 280;
var playerHealth = 100;
var menu = 0;
var backX = 450;
var backY = 350;
var upgrade1X = 430;
var upgrade1Y = 250;
function start() {
 badguypic1 = new component(25, 25, "red", 650, 180, "img7");
 badguy1 = new component(25, 25, "red", 650, 180, "rec");
 badpos1 = new component(25, 25, "orange", 760, 180, "rec");
 badwavebox1 = new component(35, 35, "black", 755, 175, "rec");
 badguypic2 = new component(25, 25, "red", 650, 180, "img7");
 badguy2 = new component(25, 25, "red", 650, 180, "rec");
 badpos2 = new component(25, 25, "orange", 760, 180, "rec");
 badwavebox2 = new component(35, 35, "black", 755, 175, "rec");
 trienemyleft = new component(35, 35, "black", 430, 158, "rotleft");
 trienemyright = new component(35, 35, "black", 430, 158, "rotright");
 tribox = new component(35, 35, "red", 430, 158, "rec");
 tripos1 = new component(25, 25, "orange", 760, 180, "rec");
 triwavebox1 = new component(35, 35, "black", 755, 175, "rec");
 bullbox = new component(10, 10, "orange", 400, 180, "rec");
 bpic = new component(10, 10, "orange", 400, 180, "img6");
 box = new component(25, 25, "black", playerX, playerY, "rec");
 circle = new component(32, 32, "darkblue", playerX - 3.5, playerY - 3.5, "img");
 w1t5 = new component(800, 500, "darkblue", 0, 0, "img5");
 w5t7 = new component(800, 390, "darkblue", 0, 0, "waveimg5-7");
 wallleft = new component(20, 400, "black", -10, 0, "rec");
 wallright = new component(20, 400, "black", 790, 0, "rec");
 wall3 = new component(800, 20, "black", 0, -10, "rec");
 wall4 = new component(800, 20, "black", 0, 390, "rec");
 roofhouse1 = new component(140, 130, "black", 70, 70, "houseroof1_img");
 insidedetect1 = new component(120, 140, "gray", 80, 80, "rec");
 floorhouse1 = new component(120, 120, "black", 80, 80, "housefloor1_img");
 wallhouse1 = new component(120, 10, "grey", 80, 80, "rec");
 wallhouse1_2 = new component(120, 10, "grey", 80, 70, "rec");
 wallhouse2 = new component(10, 100, "grey", 80, 90, "rec");
 wallhouse2_2 = new component(10, 120, "grey", 70, 70, "rec");
 wallhouse3 = new component(10, 100, "grey", 190, 90, "rec");
 wallhouse3_2 = new component(10, 120, "grey", 200, 70, "rec");
 wallhouse4 = new component(20, 10, "grey", 90, 180, "rec");
 wallhouse4_2 = new component(40, 10, "grey", 70, 190, "rec");
 wallhouse5 = new component(10, 20, "grey", 100, 180, "rec");
 wallhouse6 = new component(30, 10, "grey", 160, 180, "rec");
 wallhouse6_2 = new component(50, 10, "grey", 160, 190, "rec");
 wallhouse7 = new component(10, 20, "grey", 160, 180, "rec");
 wall2house1 = new component(190, 10, "grey", 510, 100, "rec");
 wall2house1_2 = new component(200, 10, "grey", 500, 90, "rec");
 wall2house2 = new component(10, 80, "grey", 510, 110, "rec");
 wall2house2_2 = new component(10, 100, "grey", 500, 100, "rec");
 wall2house3 = new component(10, 80, "grey", 690, 110, "rec");
 wall2house3_2 = new component(10, 110, "grey", 700, 90, "rec");
 wall2house4 = new component(50, 10, "grey", 510, 190, "rec");
 wall2house4_2 = new component(60, 10, "grey", 500, 200, "rec");
 wall2house5 = new component(10, 20, "grey", 550, 190, "rec");
 wall2house6 = new component(90, 10, "grey", 610, 190, "rec");
 wall2house6_2 = new component(100, 10, "grey", 610, 200, "rec");
 wall2house7 = new component(10, 20, "grey", 610, 190, "rec");
 roof2house1 = new component(210, 120, "black", 500, 90, "houseroof1_img");
 inside2detect1 = new component(210, 140, "gray", 500, 90, "rec");
 floor2house1 = new component(200, 120, "black", 500, 90, "housefloor1_img");
 tree1 = new component(50, 50, "black", 150, 250, "tree_img");
 tree2 = new component(50, 50, "black", 650, 270, "tree_img");
 tree3 = new component(50, 50, "black", 250, 80, "tree_img");
 ui = new component(800, 300, "white", 0, 390, "img2");
 backbuttonnodetect = new component(120, 50, backbttncolor, backX - 100, backY + 100, "img4");
 backtxt = new component("30px", "Consolas", "white", backX - 65, backY + 130, "text");
 backtxt.font = "20px Consolas";
 backtxt.text = "BACK";
 upgrade1buttonnodetect = new component(160, 50, backbttncolor, upgrade1X - 100, upgrade1Y + 100, "img4");
 upgrade1txt = new component("30px", "Consolas", "white", upgrade1X - 96, upgrade1Y + 130, "text");
 upgrade1txt.font = "15px Consolas";
 upgrade1txt.text = "#1 Weapon Upgrade";
 max1 = new component(160, 50, "gray", upgrade1X - 100, upgrade1Y + 100, "img4");
 max1txt = new component("30px", "Consolas", "white", upgrade1X - 50, upgrade1Y + 130, "text");
 max1txt.font = "20px Consolas";
 max1txt.text = "MAXED";
 upgradeboard = new component(800, 500, "black", 0, 0, "img2");
 upgradetxt = new component("30px", "Consolas", "white", 350, 20, "text");
 upgradetxt.font = "20px Consolas";
 upgradetxt.text = "Upgrade Menu";
 costToRevive = new component("30px", "Consolas", "darkred", 40, 490, "text");
 costToRevive.font = "30px Consolas";
 menuboard = new component(800, 500, "black", 0, 0, "img10");
 formplat = new component(75, 75, "black", 362.5, 157.5, "plat");
 border1_5 = new component(800, 390, "black", 0, 0, "bor");
 DeathForPlayer = new component(800, 500, "black", 0, 0, "DeathScreenPlayer");
 console.log("width" + w);
 console.log("height" + h);
 Board.start();
 updateGameArea();
 }
 
var backbttncolor = "gray";
 
var Board = {
canvas : document.createElement("canvas"),
start : function() {
this.canvas.width = 800;
this.canvas.height = 500;
this.context = this.canvas.getContext("2d");
document.body.insertBefore(this.canvas,
document.body.childNodes[0]);
this.frameNo = 60;
this.interval = setInterval(updateGameArea, 10);
window.addEventListener('mousedown', function (e) {
			Board.x = e.pageX;
			Board.y = e.pageY;
		})
		window.addEventListener('mouseup', function (e) {
			Board.x = false;
			Board.y = false;
		})
		window.addEventListener('touchstart', function (e) {
			Board.x = e.pageX;
			Board.y = e.pageY;
		})
		window.addEventListener('touchend', function (e) {
			Board.x = false;
			Board.y = false;
		})
},
clear : function() {
this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
},
}

function component(width, height, color ,x ,y, type, radius, outcolor, thickness) {
this.type = type;
this.speedX = 0;
this.speedY = 0;
this.x = x;
this.y = y;
this.thickness = thickness;
this.outcolor = outcolor;
this.radius = radius;
this.update = function() {
ctx = Board.context;
if (this.type == "text") {
 ctx.font = this.font;
 ctx.fillStyle = color;
 ctx.fillText(this.text, this.x, this.y);
} else {
if (type == "rec") {
this.width = width;
this.height = height;
ctx.fillStyle = color;
ctx.fillRect(this.x, this.y, this.width, this.height);
 }
 if (type == "cir") {
 ctx.beginPath();
 ctx.arc(this.x, this.y, radius, 0, 2 * Math.PI, true);
 ctx.fillStyle = color;
 ctx.fill();
 ctx.lineWidth = thickness;
 ctx.strokeStyle = outcolor;
 ctx.stroke();
 } else {
 if (type == "img") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("playerimg");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img2") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("uiimg");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img3") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("healthbo");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img4") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("healthba");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img5") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("wave1t5");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img6") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("bullpic");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img7") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("badguy1img");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img8") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("ammopic1");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img9") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("healthpic1");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "img10") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("menupic");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "rotleft") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("triimgleft");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "rotright") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("triimgright");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "plat") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("1-5platform");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "bor") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("1-5sideborder");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "housefloor1_img") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("housefloor1");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "houseroof1_img") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("houseroof1");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "tree_img") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("tree");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "waveimg5-7") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("wave5t7");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
 if (type == "DeathScreenPlayer") {
 this.width = width;
 this.height = height;
 var img = document.getElementById("DeathScr");
ctx.drawImage(img, this.x, this.y, this.width, this.height);
 }
  }
 }
}
this.clicked = function() {
	   var myleft = this.x;
	   var myright = this.x + (this.width);
	   var mytop = this.y;
	   var mybottom = this.y + (this.height);
		var clicked = true;
		if ((mybottom < Board.y) || (mytop > Board.y) || (myright < Board.x) || (myleft > Board.x)) {
			clicked = false;
		}
		return clicked;
	}
this.newPos = function() {
this.x += this.speedX;
this.y += this.speedY;
}
this.crashWith = function(otherobj) {
var myleft = this.x;
var myright = this.x + (this.width);
var mytop = this.y;
var mybottom = this.y + (this.height);
var otherleft = otherobj.x;
var otherright = otherobj.x + (otherobj.width);
var othertop = otherobj.y;
var otherbottom = otherobj.y + (otherobj.height);
var crash = true;
if ((mybottom < othertop) ||
 (mytop > otherbottom) ||
 (myright < otherleft) ||
 (myleft > otherright)) {
crash = false;
 }
 return crash;
}
}

function componentrotate(width, height, color, x, y, type) {   
 this.x = x;
 this.y = y;
 this.angle = 0;
    this.update = function() {
 if (type == "rot") {
 this.x = x;
 this.y = y;
 this.width = width;
 this.height = height;
 ctx = Board.context;
 ctx.save();
 ctx.translate(this.x, this.y);        
 ctx.rotate(this.angle);
 var img = document.getElementById("testimg");
 ctx.drawImage(img, this.width / -2, this.height / -1.5, this.width, this.height);
 ctx.restore();
  } 
 }
this.newPos = function() {
this.x += this.speedX;
this.y += this.speedY;
 } 
}

var HealthX = 30;
var HealthY = 450;
var HealthWidth = 103;
var HealthHeight = 30;
var Death1 = 0;
var texth;
var word = "Health:";
var hcolor = "Darkgreen";
function Health1() {
 bo = new component(113, 56.5, "darkblue", 25, 428, "img3");
 w1 = new component(5, 48, "black", HealthX - 5, HealthY - 17, "rec");
 w2 = new component(5, 48, "black", HealthX + 103, HealthY - 17, "rec");
 w3 = new component(113, 5, "black", HealthX - 5, HealthY - 22, "rec");
 w4 = new component(113, 5, "black", HealthX - 5, HealthY + 30, "rec");
 g = new component(HealthWidth, HealthHeight, "gray", HealthX, HealthY - 17, "img4");
 texth = new component("30px", "Consolas", "red", HealthX + 2, HealthY - 2, "text");
 base = new component(HealthWidth, HealthHeight, "gray", HealthX, HealthY, "rec");
 full = new component(playerHealth, HealthHeight - 5, hcolor, HealthX + 1.5, HealthY + 2.5, "rec");
 w1.update();
 w2.update();
 w3.update();
 w4.update();
 bo.update();
 g.update();
 texth.font="18px Consolas";
 texth.text=word + Math.round(playerHealth);;
 texth.update();
 base.update();
 full.update();
 if (playerHealth > 75) {
 hcolor = "Darkgreen";
 }
 if (playerHealth < 75) {
 hcolor = "green";
 }
 if (playerHealth < 50) {
 hcolor = "yellow";
 }
 if (playerHealth < 25) {
 hcolor = "orange";
 }
 if (playerHealth < 10) {
 hcolor = "red";
 }
 if (playerHealth < 1) {
Death1 = 1;
 }
 if (playerHealth > 1) {
Death1 = 0;
 }
}

var showmessage = 0;
var payback = 30;
var revivecost = 100;
function relive() {
if (Death1 > 0) {
if (money >= revivecost) {
 money -= revivecost;
 playerHealth = 100;
 if (ammo < 50) {
	ammo += payback;
   }
  } else
if (money < revivecost) {
showmessage = 1;
  }  
 }
}

function stopshow() {
showmessage = 0;
}

var crate1X = 377.5;
var crate1Y = 184.5;
var crateh1X = 403.5;
var crateh1Y = 184.5;
function ammocrate() {
ammocrate1 = new component(20, 20, "yellow", crate1X, crate1Y, "rec");
healthcrate1 = new component(20, 20, "red", crateh1X, crateh1Y, "rec");
ammocrate1picO = new component(20, 20, "yellow", crate1X, crate1Y, "img8");
healthcrate1picO = new component(20, 20, "red", crateh1X, crateh1Y, "img9");
}

var wave = 1;
var oldwave = 1;
var upgrademenu = 0;
function checkwave() {
	if (oldwave != wave){
		upgrademenu = 1;
		oldwave += 1;
	}
}

var resetframe = 6;
var tickCount = 0;
var frameIndex = 0;
var ticksPerFrame = 60;
var startTime = 0;
function framerate() {
if (startTime == 1) {
        tickCount += 1;	
        if (tickCount > ticksPerFrame) {
        	tickCount = 0;
            frameIndex += 1; 
        }
		if (frameIndex == resetframe) {
		    tickCount = 0;
            frameIndex = 0;
            startTime = 0;			
        }
	}
}
	
var resetframe2 = 6;
var tickCount2 = 0;
var frameIndex2 = 0;
var ticksPerFrame2 = 60;
var startTime2 = 0;
function framerate2() {
if (startTime2 == 1) {
        tickCount2 += 1;	
        if (tickCount2 > ticksPerFrame2) {
        	tickCount2 = 0;
            frameIndex2 += 1; 
        }
		if (frameIndex2 == resetframe2) {
		    tickCount2 = 0;
            frameIndex2 = 0;
            startTime2 = 0;			
        }
	}
}

var resetframe3 = 3;
var tickCount3 = 0;
var frameIndex3 = 0;
var ticksPerFrame3 = 60;
var startTime3 = 0;
function framerate3() {
if (startTime3 == 1) {
        tickCount3 += 1;	
        if (tickCount3 > ticksPerFrame3) {
        	tickCount3 = 0;
            frameIndex3 += 1; 
        }
		if (frameIndex3 == resetframe3) {
		    tickCount3 = 0;
            frameIndex3 = 0;
            startTime3 = 0;			
        }
	}
}

var insidehouse1 = 0;
var inside2house1 = 0;
function housecontrols() {
if (wave < 5) {
if (box.crashWith(insidedetect1)) {
insidehouse1 = 1;
  }
if (box.crashWith(insidedetect1) == false) {
insidehouse1 = 0; 
  }
if (box.crashWith(inside2detect1)) {
inside2house1 = 1;
  }
if (box.crashWith(inside2detect1) == false) {
inside2house1 = 0; 
  }
 }
}

function updateGameArea() {
framerate();
framerate2();
framerate3();
resetfire();
Board.clear();
costToRevive.text = "You must have $" + revivecost + " to revive";
playSound();
skipSound();
box.update();
if (fire > 0) {
bullbox.update();
}
if (wave < 7 && wave > 1) {
if (BadDeath2 < 1) {
if (Death1 == 0) {
badguy2.update();
  }
 }
}
if (wave > 4 && wave < 7) {
if (BadDeath3 == 0) {
tribox.update();
 }
}
if (wave < 5) {
if (BadDeath < 1) {
if (Death1 == 0) {
badguy1.update();
  }
 }
}
badwavebox1.update();
badpos1.update();
badwavebox2.update();
triwavebox1.update();
tripos1.update();
badpos2.update();
if (menu > 0) {
if (cratespawn > 0) {
ammocrate1.update();
 }
}
if (menu > 0) {
if (cratespawn2 > 0) {
healthcrate1.update();
 }
}
wallleft.update();
wallright.update();
wall3.update();
wall4.update();
if (wave < 5) {
insidedetect1.update();
inside2detect1.update();
w1t5.update();
formplat.update();
floorhouse1.update();
floor2house1.update();
}
if (wave > 4 && wave < 8) {
w5t7.update();
}
console.log("Count: " + count);
if (menu > 0) {
if (cratespawn > 0) {
ammocrate1picO.update();
 }
}
if (menu > 0) {
if (cratespawn2 > 0) {
healthcrate1picO.update();
 }
}
if (fire > 0) {
bpic.update();
}
if (wave < 5) {
if (BadDeath < 1) {
if (Death1 == 0) {
badguypic1.update();
  }
 }
}
if (wave < 7 && wave > 1) {
if (BadDeath2 < 1) {
if (Death1 == 0) {
badguypic2.update();
  }
 }
}
if (wave > 4 && wave < 7) {
if (BadDeath3 == 0) {
if (Death1 == 0) {
if (box.x < tribox.x) {
trienemyleft.update();
} else {
trienemyright.update();
   }
  } 
 }
}
badboxspawn();
badtriboxspawn();
badboxspawn2();
if (cratespawn > 0) {
if (box.crashWith(ammocrate1)) {
if (ammo < 111) {
 cratespawn = 0;
 ammo += 50;
 }
 }
}
if (cratespawn2 > 0) {
if (box.crashWith(healthcrate1)) {
if (playerHealth < 76) {
 cratespawn2 = 0;
 playerHealth += 25;
 }
 }
}
if (Death1 == 0) {
circle.update();
if (menu > 0) {
if (upgrademenu == 0) {
box.newPos();
circle.newPos();
  }
 }
}
if (wave < 5) {
wallhouse1.update();
wallhouse1_2.update();
wallhouse2.update();
wallhouse2_2.update();
wallhouse3.update();
wallhouse3_2.update();
wallhouse4.update();
wallhouse4_2.update();
wallhouse5.update();
wallhouse6.update();
wallhouse6_2.update();
wallhouse7.update();
wall2house1.update();
wall2house1_2.update();
wall2house2.update();
wall2house2_2.update();
wall2house3.update();
wall2house3_2.update();
wall2house4.update();
wall2house4_2.update();
wall2house5.update();
wall2house6.update();
wall2house6_2.update();
wall2house7.update();
if (inside2house1 == 0) {
roof2house1.update();
}
if (insidehouse1 == 0) {
roofhouse1.update();
 }
tree1.update();
tree2.update();
tree3.update();
}
ui.update();
if (wave < 5) {
border1_5.update();
}
if (upgrademenu == 0) {
bullbox.newPos();
badguypic1.newPos();
badguy1.newPos();
badguypic2.newPos();
badguy2.newPos();
tribox.newPos();
trienemyright.newPos();
trienemyleft.newPos();
bpic.newPos();
}
Health1();
checkwave();
playerMoney();
name();
waveammoweapon();
ammocrate();
bulletai();
badai1();
triangleAI();
housecontrols();
crashhitai1();
badai2();
countwave();
if (menu == 0) {
menuboard.update();
}
if (upgrademenu == 1) {
upgradeboard.update();
upgradetxt.update();
backbuttonnodetect.update();
backtxt.update();
if (weaponupgrade1 == 0) {
upgrade1buttonnodetect.update();
upgrade1txt.update();
 }
if (weaponupgrade1 > 0) {
max1.update();
max1txt.update();
}
}
if (Death1 > 0) {
DeathForPlayer.update();
}
if (showmessage == 1) {
costToRevive.update();
}
if (menu == 1) {
ammo = 160;
menu += 1;
}
if (up == 1) {
 if (touchtop == 0) {
 if (box.speedY >= -4) {
 box.speedY -= 0.05;
 circle.speedY -= 0.05;
 } else {
 box.speedY = -4;
 circle.speedY = -4;
 }
 } else {
 box.speedY = 0;
 circle.speedY = 0;
 }
}
if (down == 1) {
 if (touchbottom == 0){
 if (box.speedY <= 4) {
 circle.speedY += 0.05;
 box.speedY += 0.05;
 } else {
 box.speedY = 4;
 circle.speedY = 4;
 }
 } else {
 box.speedY = 0;
 circle.speedY = 0;
 }
}
if (left == 1) {
 if (touchleft == 0) {
 if (box.speedX >= -4) {
 circle.speedX -= 0.05;
 box.speedX -= 0.05;
 } else {
 box.speedX = -4;
 circle.speedX = -4;
 }
 } else {
 box.speedX = 0;
 circle.speedX = 0;
 }
}
if (right == 1) {
 if (touchright == 0) {
 if (box.speedX <= 4) {
 circle.speedX += 0.05;
 box.speedX += 0.05;
 } else {
 box.speedX = 4;
 circle.speedX = 4;
 }
 } else {
 box.speedX = 0;
 circle.speedX = 0;
 }
}
if (box.crashWith(wallleft)) {
 touchleft = 1;
}
if (box.crashWith(wallright)) {
 touchright = 1;
}
if (box.crashWith(wall3)) {
 touchtop = 1;
}
if (box.crashWith(wall4)) {
 touchbottom = 1;
}
if (wave < 5) {
if (box.crashWith(wallhouse1)) {
 touchtop = 1;
}
if (box.crashWith(wallhouse1_2)) {
 touchbottom = 1;
}
if (box.crashWith(wallhouse2)) {
 touchleft = 1;
}
if (box.crashWith(wallhouse2_2)) {
 touchright = 1;
}
if (box.crashWith(wallhouse3_2)) {
 touchleft = 1;
}
if (box.crashWith(wallhouse3)) {
 touchright = 1;
}
if (box.crashWith(wallhouse4_2)) {
 touchtop = 1;
}
if (box.crashWith(wallhouse4)) {
 touchbottom = 1;
}
if (box.crashWith(wallhouse5)) {
 touchleft = 1;
}
if (box.crashWith(wallhouse6_2)) {
 touchtop = 1;
}
if (box.crashWith(wallhouse6)) {
 touchbottom = 1;
}
if (box.crashWith(wallhouse7)) {
 touchright = 1;
}
if (box.crashWith(wall2house1)) {
 touchtop = 1;
}
if (box.crashWith(wall2house1_2)) {
 touchbottom = 1;
}
if (box.crashWith(wall2house2)) {
 touchleft = 1;
}
if (box.crashWith(wall2house2_2)) {
 touchright = 1;
}
if (box.crashWith(wall2house3_2)) {
 touchleft = 1;
}
if (box.crashWith(wall2house3)) {
 touchright = 1;
}
if (box.crashWith(wall2house4_2)) {
 touchtop = 1;
}
if (box.crashWith(wall2house4)) {
 touchbottom = 1;
}
if (box.crashWith(wall2house5)) {
 touchleft = 1;
}
if (box.crashWith(wall2house6_2)) {
 touchtop = 1;
}
if (box.crashWith(wall2house6)) {
 touchbottom = 1;
}
if (box.crashWith(wall2house7)) {
 touchright = 1;
}
 }
}

document.onkeydown = function(e) {
    switch (e.keyCode) {
        case 37:
            shootLeft();
            break;
        case 38:
            shootUp();
            break;
        case 39:
            shootRight();
            break;
        case 40:
            shootDown();
            break;
		case 87:
            moveUp();
            break;
		case 65:
            moveLeft();
            break;
		case 68:
            moveRight();
            break;
		case 83:
            moveDown();
            break;
		case 82:
            relive();
            break;
	    case 49:
		    swapweap1();
			break;
		case 50:
		    swapweap2();
			break;
		case 27:
		    backfunc();
			break;
		case 97:
		    upgrade1func();
			break;
    }
};

document.onkeyup = function(e) {
    switch (e.keyCode) {
		case 87:
            clearmoveu();
            break;
		case 65:
            clearmovel();
            break;
		case 68:
            clearmover();
            break;
		case 83:
            clearmoved();
            break;
		case 82:
            stopshow();
            break;
    }
};

var weaponupgrade1 = 0;
var weapon = 0;
var ammo = 160;
var weapname = "pistol";
function waveammoweapon() {
if (weapon == 0) {
 weapname = "pistol";
 PlayerDamageDeal = 20;
 bullrange = 3;
}
if (weapon == 1) {
if (weaponupgrade1 == 1) {
 weapname = "Hi-Beam";
 PlayerDamageDeal = 20;
 bullrange = 2;
 }
}
obo = new component(100, 80, "gray", 350, 430, "img3");
oba = new component(90, 80, "gray", 355, 435, "img4");
bam = new component(83, 15, "gray", 358, 438, "rec");
bwa = new component(83, 15, "gray", 358, 477, "rec");
ammotxt = new component("30px", "Consolas", "orange", 360, 450, "text");
ammotxt.font="18px Consolas";
ammotxt.text="Ammo:" + ammo;
weaptxt = new component("30px", "Consolas", "black", 358, 470, "text");
weaptxt.font="12px Consolas bold";
weaptxt.text="Weapon:" + weapname;
wavetxt = new component("30px", "Consolas", "lightgray", 360, 490, "text");
wavetxt.font="18px Consolas";
wavetxt.text="Wave:" + wave;
obo.update();
oba.update();
bam.update();
bwa.update();
ammotxt.update();
weaptxt.update();
wavetxt.update();
}

var spawncrate2pos = Math.floor(Math.random() * 2);
var spawncrate1pos = Math.floor(Math.random() * 2);
var count = 0;
var numofbad = 10;
var moneyperwave = 10;
var moneyperendie = 2;
var moneyperendie2 = 6;
var cratespawn = 0;
var cratespawn2 = 0
var chanceofdrop = 3;
var chanceofdrop2 = 3;
var chanceofdrop3 = 2;
function countwave() {
if (menu > 0) {
if (BadDeath > 0) {
if (badguy1.crashWith(badwavebox1)) {
if (upgrademenu == 0) {
if (Math.floor(Math.random() * chanceofdrop) == 1) {
if (cratespawn2 == 0) {
if (playerHealth < 100) {
cratespawn2 += 1;
spawncrate2pos = Math.floor(Math.random() * 2);
  }
 }
}
if (Math.floor(Math.random() * chanceofdrop) == 1) {
if (cratespawn == 0) {
if (ammo < 160) {
cratespawn += 1;
spawncrate1pos = Math.floor(Math.random() * 2);
   }
  }
 }
if (cratespawn == 0) {
if (wave < 5) {
if (spawncrate1pos == 1) {
 crate1X = 90;
 crate1Y = 90;
 } else {
 crate1X = 377.5;
 crate1Y = 184.5;
   }
  } else {
 crate1X = 377.5;
 crate1Y = 184.5;
  }
 }
if (cratespawn2 == 0) {
if (wave < 5) {
if (spawncrate2pos == 1) {
 crateh1X = 520;
 crateh1Y = 110;
 } else {
 crateh1X = 403.5;
 crateh1Y = 184.5;
   }
  } else {
 crateh1X = 403.5;
 crateh1Y = 184.5;
  }
 }
}
if (wave < 5) {
if (upgrademenu == 0) {
money += moneyperendie;
count += 1;
}
	}
   }
  }
 }
if (wave < 7 && wave > 1) {
if (BadDeath2 > 0) {
if (badguy2.crashWith(badwavebox2)) {
if (upgrademenu == 0) {
money += moneyperendie;
count += 1;
}
if (wave > 2 && wave < 6) {
if (Math.floor(Math.random() * chanceofdrop2) == 1) {
if (cratespawn2 == 0) {
if (playerHealth < 100) {
cratespawn2 += 1;
spawncrate2pos = Math.floor(Math.random() * 2);
  }
 }
}
if (Math.floor(Math.random() * chanceofdrop2) == 1) {
if (cratespawn == 0) {
if (ammo < 160) {
cratespawn += 1;
spawncrate1pos = Math.floor(Math.random() * 2);
  }
 }
}
if (cratespawn == 0) {
if (wave < 5) {
if (spawncrate1pos == 1) {
 crate1X = 90;
 crate1Y = 90;
 } else {
 crate1X = 377.5;
 crate1Y = 184.5;
   }
  } else {
 crate1X = 377.5;
 crate1Y = 184.5;
  }
 }
if (cratespawn2 == 0) {
if (wave < 5) {
if (spawncrate2pos == 1) {
 crateh1X = 520;
 crateh1Y = 110;
 } else {
 crateh1X = 403.5;
 crateh1Y = 184.5;
   }
  } else {
 crateh1X = 403.5;
 crateh1Y = 184.5;
  }
 }
}
   }
  }
 }
if (wave > 4 && wave < 7) {
if (BadDeath3 > 0) {
if (tribox.crashWith(triwavebox1)) {
if (upgrademenu == 0) {
money += moneyperendie2;
count += 1;
}
if (wave > 4 && wave < 7) {
if (Math.floor(Math.random() * chanceofdrop3) == 1) {
if (cratespawn2 == 0) {
if (playerHealth < 100) {
cratespawn2 += 1;
  }
 } 
}
if (Math.floor(Math.random() * chanceofdrop3) == 1) {
if (cratespawn == 0) {
if (ammo < 160) {
cratespawn += 1;
   }
  }
 }
}
   }
  }
 }
 if (upgrademenu == 0) {
 if (wave < 7 || wave > 7) {
 if (count == numofbad) {
 money += moneyperwave;
 wave += 1;
 }
}
 if (count >= numofbad) {
 count = 0;
 }
 if (wave == 3) {
numofbad = 20;
moneyperendie = 4;
  }
 if (wave == 4) {
revivecost = 150;
  }
 if (wave == 5) {
numofbad = 25;
moneyperendie = 6;
  }
 if (wave == 6) {
moneyperendie = 8;
revivecost = 200;
moneyperendie2 = 10;
  }
 }
}

var BadDeath = 1;
var Badhealth1 = 0;
var PlayerDamageDeal = 20;
var Bad1DamageDeal = 0.1;
function badboxspawn() {
if (wave < 5) {
if (bullbox.crashWith(badguy1)) {
if (Badhealth1 >= 0) {
if (fire > 0) {
Badhealth1 -= PlayerDamageDeal;
fire = 0;
  }
 }
}
if (Badhealth1 >= 0) {
BadDeath = 0;
 }
if (Badhealth1 == 0) {
BadDeath = 1;
 }
 }
}


function crashhitai1() {
  if (BadDeath < 1) {
	if (badguy1.crashWith(wallright)) {
		touchwallrightbad1 = 1;
		if (touchwallrightbad1 == 1) {
			badguypic1.speedX = -1;
			badguy1.speedX = -1;
		}
	}
	if (badguy1.crashWith(wallhouse3)) {
		touchwallrightbad1 = 1;
		if (touchwallrightbad1 == 1) {
			badguypic1.speedX = -1;
			badguy1.speedX = -1;
		}
	}
	if (badguy1.crashWith(wallhouse7)) {
		touchwallrightbad1 = 1;
		if (touchwallrightbad1 == 1) {
			badguypic1.speedX = -1;
			badguy1.speedX = -1;
		}
	}
	if (badguy1.crashWith(wallhouse2_2)) {
		touchwallrightbad1 = 1;
		if (touchwallrightbad1 == 1) {
			badguypic1.speedX = -1;
			badguy1.speedX = -1;
		}
	}
	if (badguy1.crashWith(wall2house3)) {
		touchwallrightbad1 = 1;
		if (touchwallrightbad1 == 1) {
			badguypic1.speedX = -1;
			badguy1.speedX = -1;
		}
	}
	if (badguy1.crashWith(wall2house7)) {
		touchwallrightbad1 = 1;
		if (touchwallrightbad1 == 1) {
			badguypic1.speedX = -1;
			badguy1.speedX = -1;
		}
	}
	if (badguy1.crashWith(wall2house2_2)) {
		touchwallrightbad1 = 1;
		if (touchwallrightbad1 == 1) {
			badguypic1.speedX = -1;
			badguy1.speedX = -1;
		}
	}
	if (badguy1.crashWith(wallright) == false) {
	  touchwallrightbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse3) == false) {
	  touchwallrightbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse2_2) == false) {
	  touchwallrightbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse7) == false) {
	  touchwallrightbad1 = 0;
	}
	if (badguy1.crashWith(wall2house3) == false) {
	  touchwallrightbad1 = 0;
	}
	if (badguy1.crashWith(wall2house2_2) == false) {
	  touchwallrightbad1 = 0;
	}
	if (badguy1.crashWith(wall2house7) == false) {
	  touchwallrightbad1 = 0;
	}
	if (badguy1.crashWith(wallleft)) {
		touchwallleftbad1 = 1;
		if (touchwallleftbad1 == 1) {
			badguypic1.speedX = 1;
			badguy1.speedX = 1;
		}
	}
	if (badguy1.crashWith(wallhouse3_2)) {
		touchwallleftbad1 = 1;
		if (touchwallleftbad1 == 1) {
			badguypic1.speedX = 1;
			badguy1.speedX = 1;
		}
	}
	if (badguy1.crashWith(wallhouse2)) {
		touchwallleftbad1 = 1;
		if (touchwallleftbad1 == 1) {
			badguypic1.speedX = 1;
			badguy1.speedX = 1;
		}
	}
	if (badguy1.crashWith(wallhouse5)) {
		touchwallleftbad1 = 1;
		if (touchwallleftbad1 == 1) {
			badguypic1.speedX = 1;
			badguy1.speedX = 1;
		}
	}
	if (badguy1.crashWith(wall2house3_2)) {
		touchwallleftbad1 = 1;
		if (touchwallleftbad1 == 1) {
			badguypic1.speedX = 1;
			badguy1.speedX = 1;
		}
	}
	if (badguy1.crashWith(wall2house2)) {
		touchwallleftbad1 = 1;
		if (touchwallleftbad1 == 1) {
			badguypic1.speedX = 1;
			badguy1.speedX = 1;
		}
	}
	if (badguy1.crashWith(wall2house5)) {
		touchwallleftbad1 = 1;
		if (touchwallleftbad1 == 1) {
			badguypic1.speedX = 1;
			badguy1.speedX = 1;
		}
	}
	if (badguy1.crashWith(wallleft) == false) {
	  touchwallleftbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse3_2) == false) {
	  touchwallleftbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse2) == false) {
	  touchwallleftbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse5) == false) {
	  touchwallleftbad1 = 0;
	}
	if (badguy1.crashWith(wall2house3_2) == false) {
	  touchwallleftbad1 = 0;
	}
	if (badguy1.crashWith(wall2house2) == false) {
	  touchwallleftbad1 = 0;
	}
	if (badguy1.crashWith(wall2house5) == false) {
	  touchwallleftbad1 = 0;
	}
	if (badguy1.crashWith(wall3)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic1.speedY = 1;
			badguy1.speedY = 1;
		}
	}
	if (badguy1.crashWith(wallhouse1)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic1.speedY = 1;
			badguy1.speedY = 1;
		}
	}
	if (badguy1.crashWith(wallhouse4_2)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic1.speedY = 1;
			badguy1.speedY = 1;
		}
	}
	if (badguy1.crashWith(wallhouse6_2)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic1.speedY = 1;
			badguy1.speedY = 1;
		}
	}
	if (badguy1.crashWith(wall2house1)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic1.speedY = 1;
			badguy1.speedY = 1;
		}
	}
	if (badguy1.crashWith(wall2house4_2)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic1.speedY = 1;
			badguy1.speedY = 1;
		}
	}
	if (badguy1.crashWith(wall2house6_2)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic1.speedY = 1;
			badguy1.speedY = 1;
		}
	}
	if (badguy1.crashWith(wall3) == false) {
	  touchwallupbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse1) == false) {
	  touchwallupbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse4_2) == false) {
	  touchwallupbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse6_2) == false) {
	  touchwallupbad1 = 0;
	}
	if (badguy1.crashWith(wall2house1) == false) {
	  touchwallupbad1 = 0;
	}
	if (badguy1.crashWith(wall2house4_2) == false) {
	  touchwallupbad1 = 0;
	}
	if (badguy1.crashWith(wall2house6_2) == false) {
	  touchwallupbad1 = 0;
	}
	if (badguy1.crashWith(wall4)) {
		touchwalldownbad1 = 1;
		if (touchwalldownbad1 == 1) {
			badguypic1.speedY = -1;
			badguy1.speedY = -1;
		}
	}
	if (badguy1.crashWith(wallhouse1_2)) {
		touchwalldownbad1 = 1;
		if (touchwalldownbad1 == 1) {
			badguypic1.speedY = -1;
			badguy1.speedY = -1;
		}
	}
	if (badguy1.crashWith(wallhouse4)) {
		touchwalldownbad1 = 1;
		if (touchwalldownbad1 == 1) {
			badguypic1.speedY = -1;
			badguy1.speedY = -1;
		}
	}
	if (badguy1.crashWith(wallhouse6)) {
		touchwalldownbad1 = 1;
		if (touchwalldownbad1 == 1) {
			badguypic1.speedY = -1;
			badguy1.speedY = -1;
		}
	}
	if (badguy1.crashWith(wall2house1_2)) {
		touchwalldownbad1 = 1;
		if (touchwalldownbad1 == 1) {
			badguypic1.speedY = -1;
			badguy1.speedY = -1;
		}
	}
	if (badguy1.crashWith(wall2house4)) {
		touchwalldownbad1 = 1;
		if (touchwalldownbad1 == 1) {
			badguypic1.speedY = -1;
			badguy1.speedY = -1;
		}
	}
	if (badguy1.crashWith(wall2house6)) {
		touchwalldownbad1 = 1;
		if (touchwalldownbad1 == 1) {
			badguypic1.speedY = -1;
			badguy1.speedY = -1;
		}
	}
	if (badguy1.crashWith(wall4) == false) {
	  touchwalldownbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse1_2) == false) {
	  touchwalldownbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse4) == false) {
	  touchwalldownbad1 = 0;
	}
	if (badguy1.crashWith(wallhouse6) == false) {
	  touchwalldownbad1 = 0;
	}
	if (badguy1.crashWith(wall2house1_2) == false) {
	  touchwalldownbad1 = 0;
	}
	if (badguy1.crashWith(wall2house4) == false) {
	  touchwalldownbad1 = 0;
	}
	if (badguy1.crashWith(wall2house6) == false) {
	  touchwalldownbad1 = 0;
	}
   }
   if (BadDeath2 < 1) {
	if (badguy2.crashWith(wallright)) {
		touchwallrightbad2 = 1;
		if (touchwallrightbad2 == 1) {
			badguypic2.speedX = -1;
			badguy2.speedX = -1;
		}
	}
	if (badguy2.crashWith(wallright) == false) {
	  touchwallrightbad2 = 0;
	}
	if (badguy2.crashWith(wallleft)) {
		touchwallleftbad2 = 1;
		if (touchwallleftbad2 == 1) {
			badguypic2.speedX = 1;
			badguy2.speedX = 1;
		}
	}
	if (badguy2.crashWith(wallleft) == false) {
	  touchwallleftbad2 = 0;
	}
	if (badguy2.crashWith(wall3)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic2.speedY = 1;
			badguy2.speedY = 1;
		}
	}
	if (badguy2.crashWith(wall3) == false) {
	  touchwallupbad2 = 0;
	}
	if (badguy2.crashWith(wall4)) {
		touchwalldownbad2 = 1;
		if (touchwalldownbad2 == 1) {
			badguypic2.speedY = -1;
			badguy2.speedY = -1;
		}
	}
	if (badguy2.crashWith(wall4) == false) {
	  touchwalldownbad2 = 0;
	 }
	if (wave < 5) {
	if (badguy2.crashWith(wallhouse3)) {
		touchwallrightbad2 = 1;
		if (touchwallrightbad2 == 1) {
			badguypic2.speedX = -1;
			badguy2.speedX = -1;
		}
	}
	if (badguy2.crashWith(wallhouse2_2)) {
		touchwallrightbad2 = 1;
		if (touchwallrightbad2 == 1) {
			badguypic2.speedX = -1;
			badguy2.speedX = -1;
		}
	}
	if (badguy2.crashWith(wallhouse7)) {
		touchwallrightbad2 = 1;
		if (touchwallrightbad2 == 1) {
			badguypic2.speedX = -1;
			badguy2.speedX = -1;
		}
	}
	if (badguy2.crashWith(wall2house3)) {
		touchwallrightbad2 = 1;
		if (touchwallrightbad2 == 1) {
			badguypic2.speedX = -1;
			badguy2.speedX = -1;
		}
	}
	if (badguy2.crashWith(wall2house2_2)) {
		touchwallrightbad2 = 1;
		if (touchwallrightbad2 == 1) {
			badguypic2.speedX = -1;
			badguy2.speedX = -1;
		}
	}
	if (badguy2.crashWith(wall2house7)) {
		touchwallrightbad2 = 1;
		if (touchwallrightbad2 == 1) {
			badguypic2.speedX = -1;
			badguy2.speedX = -1;
		}
	}
	if (badguy2.crashWith(wallhouse3) == false) {
	  touchwallrightbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse2_2) == false) {
	  touchwallrightbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse7) == false) {
	  touchwallrightbad2 = 0;
	}
	if (badguy2.crashWith(wall2house3) == false) {
	  touchwallrightbad2 = 0;
	}
	if (badguy2.crashWith(wall2house2_2) == false) {
	  touchwallrightbad2 = 0;
	}
	if (badguy2.crashWith(wall2house7) == false) {
	  touchwallrightbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse3_2)) {
		touchwallleftbad2 = 1;
		if (touchwallleftbad2 == 1) {
			badguypic2.speedX = 1;
			badguy2.speedX = 1;
		}
	}
	if (badguy2.crashWith(wallhouse2)) {
		touchwallleftbad2 = 1;
		if (touchwallleftbad2 == 1) {
			badguypic2.speedX = 1;
			badguy2.speedX = 1;
		}
	}
	if (badguy2.crashWith(wallhouse5)) {
		touchwallleftbad2 = 1;
		if (touchwallleftbad2 == 1) {
			badguypic2.speedX = 1;
			badguy2.speedX = 1;
		}
	}
	if (badguy2.crashWith(wall2house3_2)) {
		touchwallleftbad2 = 1;
		if (touchwallleftbad2 == 1) {
			badguypic2.speedX = 1;
			badguy2.speedX = 1;
		}
	}
	if (badguy2.crashWith(wall2house2)) {
		touchwallleftbad2 = 1;
		if (touchwallleftbad2 == 1) {
			badguypic2.speedX = 1;
			badguy2.speedX = 1;
		}
	}
	if (badguy2.crashWith(wall2house5)) {
		touchwallleftbad2 = 1;
		if (touchwallleftbad2 == 1) {
			badguypic2.speedX = 1;
			badguy2.speedX = 1;
		}
	}
	if (badguy2.crashWith(wallhouse3_2) == false) {
	  touchwallleftbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse2) == false) {
	  touchwallleftbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse5) == false) {
	  touchwallleftbad2 = 0;
	}
	if (badguy2.crashWith(wall2house3_2) == false) {
	  touchwallleftbad2 = 0;
	}
	if (badguy2.crashWith(wall2house2) == false) {
	  touchwallleftbad2 = 0;
	}
	if (badguy2.crashWith(wall2house5) == false) {
	  touchwallleftbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse1)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic2.speedY = 1;
			badguy2.speedY = 1;
		}
	}
	if (badguy2.crashWith(wallhouse4_2)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic2.speedY = 1;
			badguy2.speedY = 1;
		}
	}
	if (badguy2.crashWith(wallhouse6_2)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic2.speedY = 1;
			badguy2.speedY = 1;
		}
	}
	if (badguy2.crashWith(wall2house1)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic2.speedY = 1;
			badguy2.speedY = 1;
		}
	}
	if (badguy2.crashWith(wall2house4_2)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic2.speedY = 1;
			badguy2.speedY = 1;
		}
	}
	if (badguy2.crashWith(wall2house6_2)) {
		touchwallupbad1 = 1;
		if (touchwallupbad1 == 1) {
			badguypic2.speedY = 1;
			badguy2.speedY = 1;
		}
	}
	if (badguy2.crashWith(wallhouse1) == false) {
	  touchwallupbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse4_2) == false) {
	  touchwallupbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse6_2) == false) {
	  touchwallupbad2 = 0;
	}
	if (badguy2.crashWith(wall2house1) == false) {
	  touchwallupbad2 = 0;
	}
	if (badguy2.crashWith(wall2house4_2) == false) {
	  touchwallupbad2 = 0;
	}
	if (badguy2.crashWith(wall2house6_2) == false) {
	  touchwallupbad2 = 0;
	}
	if (badguy2.crashWith(wallhouse1_2)) {
		touchwalldownbad2 = 1;
		if (touchwalldownbad2 == 1) {
			badguypic2.speedY = -1;
			badguy2.speedY = -1;
		}
	}
	if (badguy2.crashWith(wallhouse4)) {
		touchwalldownbad2 = 1;
		if (touchwalldownbad2 == 1) {
			badguypic2.speedY = -1;
			badguy2.speedY = -1;
		}
	}
	if (badguy2.crashWith(wallhouse6)) {
		touchwalldownbad2 = 1;
		if (touchwalldownbad2 == 1) {
			badguypic2.speedY = -1;
			badguy2.speedY = -1;
		}
	}
	if (badguy2.crashWith(wall2house1_2)) {
		touchwalldownbad2 = 1;
		if (touchwalldownbad2 == 1) {
			badguypic2.speedY = -1;
			badguy2.speedY = -1;
		}
	}
	if (badguy2.crashWith(wall2house4)) {
		touchwalldownbad2 = 1;
		if (touchwalldownbad2 == 1) {
			badguypic2.speedY = -1;
			badguy2.speedY = -1;
		}
	}
	if (badguy2.crashWith(wall2house6)) {
		touchwalldownbad2 = 1;
		if (touchwalldownbad2 == 1) {
			badguypic2.speedY = -1;
			badguy2.speedY = -1;
		}
	}
	if (badguy2.crashWith(wallhouse1_2) == false) {
	  touchwalldownbad2 = 0;
	  }
	if (badguy2.crashWith(wallhouse4) == false) {
	  touchwalldownbad2 = 0;
	  }
	if (badguy2.crashWith(wallhouse6) == false) {
	  touchwalldownbad2 = 0;
	  }
	  if (badguy2.crashWith(wall2house1_2) == false) {
	  touchwalldownbad2 = 0;
	  }
	if (badguy2.crashWith(wall2house4) == false) {
	  touchwalldownbad2 = 0;
	  }
	if (badguy2.crashWith(wall2house6) == false) {
	  touchwalldownbad2 = 0;
	  }
	 }
	}
	if (BadDeath3 < 1) {
	if (tribox.crashWith(wallright)) {
		touchwallrightbad3 = 1;
		if (touchwallrightbad3 == 1) {
		    tribox.speedX = -1;
			trienemyleft.speedX = -1;
			trienemyright.speedX = -1;
		}
	}
	if (tribox.crashWith(wallright) == false) {
	  touchwallrightbad3 = 0;
	}
	if (tribox.crashWith(wallleft)) {
		touchwallleftbad3 = 1;
		if (touchwallleftbad3 == 1) {
		    tribox.speedX = 1;
			trienemyleft.speedX = 1;
			trienemyright.speedX = 1;
		}
	}
	if (tribox.crashWith(wallleft) == false) {
	  touchwallleftbad3 = 0;
	}
	if (tribox.crashWith(wall3)) {
		touchwallupbad3 = 1;
		if (touchwallupbad3 == 1) {
		    tribox.speedY = 1;
			trienemyleft.speedY = 1;
			trienemyright.speedY = 1;
		}
	}
	if (tribox.crashWith(wall3) == false) {
	  touchwallupbad3 = 0;
	}
	if (tribox.crashWith(wall4)) {
		touchwalldownbad3 = 1;
		if (touchwalldownbad3 == 1) {
		    tribox.speedY = -1;
			trienemyleft.speedY = -1;
			trienemyright.speedY = -1;
		}
	}
	if (tribox.crashWith(wall4) == false) {
	  touchwalldownbad3 = 0;
	}
  }
}

var sidebad1 = 0;
var touchwallrightbad1 = 0;
var touchwallleftbad1 = 0;
var touchwallupbad1 = 0;
var touchwalldownbad1 = 0;
var badspeedai1 = 1;
var negbadspeedai1 = -1;
var badhurtspeedai1 = 1.5;
var negbadhurtspeedai1 = -1.5;
function badai1() {
if (wave < 5) {
if (BadDeath > 0) {
if (badguy1.x > badpos1.x) {
badguypic1.speedX = -5;
badguy1.speedX = -5;
}
if (badguy1.x < badpos1.x) {
badguypic1.speedX = 5;
badguy1.speedX = 5;
}
if (badguy1.crashWith(badpos1)) {
badguypic1.speedX = 0;
badguypic1.speedY = 0;
badguy1.speedY = 0;
badguy1.speedX = 0;
Badhealth1 = 100;
BadDeath = 0;
badspeedai1 = 1;
negbadspeedai1 = -1;
badhurtspeedai1 = 1.5;
negbadhurtspeedai1 = -1.5;
startTime = 0;
 }
if (badguy1.y > badpos1.y) {
badguypic1.speedY = -5;
badguy1.speedY = -5;
}
if (badguy1.y < badpos1.y) {
badguypic1.speedY = 5;
badguy1.speedY = 5;
}
 }
if (BadDeath < 1) {
if (menu > 0) {
if (badguy1.crashWith(wallright) == false) {
if (badguy1.crashWith(wallleft) == false) {
if (badguy1.crashWith(wall3) == false) {
if (badguy1.crashWith(wall4) == false) {
if (badguy1.x + 5 > box.x + 23) {
    sidebad1 = 0;
}
if (badguy1.x < box.x - 23) {
    sidebad1 = 1;
}
if (sidebad1 == 0) {
if (badguy1.x + 5 > box.x + 23) {
badguypic1.speedX = negbadspeedai1;
badguy1.speedX = negbadspeedai1;
if (Badhealth1 <= 50) {
badguypic1.speedX = negbadhurtspeedai1;
badguy1.speedX = negbadhurtspeedai1;
  }
 }
}
if (sidebad1 == 1) {
if (badguy1.x < box.x - 23) {
badguypic1.speedX = badspeedai1;
badguy1.speedX = badspeedai1;
if (Badhealth1 <= 50) {
badguypic1.speedX = badhurtspeedai1;
badguy1.speedX = badhurtspeedai1;
  }
 }
}
if (badguy1.y > box.y) {
badguypic1.speedY = negbadspeedai1;
badguy1.speedY = negbadspeedai1;
if (Badhealth1 <= 50) {
badguypic1.speedY = negbadhurtspeedai1;
badguy1.speedY = negbadhurtspeedai1;
 }
}
if (badguy1.y < box.y) {
badguypic1.speedY = badspeedai1;
badguy1.speedY = badspeedai1;
if (Badhealth1 <= 50) {
badguypic1.speedY = badhurtspeedai1;
badguy1.speedY = badhurtspeedai1;
 }
}
   }
  }
 }
}
if (box.crashWith(badguy1)) {
if (playerHealth > 0) {
playerHealth -= Bad1DamageDeal;
 }
}
if (weapon == 1) {
 if (bullbox.crashWith(badguy1)) {
 if (fire > 0) {
  if (startTime == 0) {
  startTime = 1;
    }
   }
  }
}
if (startTime == 1) {
 badspeedai1 = 0.1;
 negbadspeedai1 = -0.1;
 badhurtspeedai1 = 0.2;
 negbadhurtspeedai1 = -0.1;
   } else 
if (startTime == 0) {
 badspeedai1 = 1;
 negbadspeedai1 = -1;
 badhurtspeedai1 = 1.5;
 negbadhurtspeedai1 = -1.5;
   }
 }
 }
 }
}

var BadDeath2 = 1;
var Badhealth2 = 0;
var Bad2DamageDeal = 0.1;
function badboxspawn2() {
if (wave < 7 && wave > 1) {
if (badguy2.crashWith(bullbox)) {
if (Badhealth2 >= 0) {
if (fire > 0) {
Badhealth2 -= PlayerDamageDeal;
fire = 0;
  }
 }
}
if (Badhealth2 >= 0) {
BadDeath2 = 0;
 }
if (Badhealth2 == 0) {
BadDeath2 = 1;
 }
 }
}

var sidebad2 = 0;
var touchwallrightbad2 = 0;
var touchwallleftbad2 = 0;
var touchwallupbad2 = 0;
var touchwalldownbad2 = 0;
var badspeedai2 = 1;
var negbadspeedai2 = -1;
var badhurtspeedai2 = 1.5;
var negbadhurtspeedai2 = -1.5;
function badai2() {
if (wave < 7 && wave > 1) {
if (BadDeath2 > 0) {
if (badguy2.x > badpos2.x) {
badguypic2.speedX = -5;
badguy2.speedX = -5;
}
if (badguy2.x < badpos2.x) {
badguypic2.speedX = 5;
badguy2.speedX = 5;
}
if (badguy2.crashWith(badpos2)) {
badguypic2.speedX = 0;
badguypic2.speedY = 0;
badguy2.speedY = 0;
badguy2.speedX = 0;
Badhealth2 = 100;
BadDeath2 = 0;
badspeedai2 = 1;
negbadspeedai2 = -1;
badhurtspeedai2 = 1.5;
negbadhurtspeedai2 = -1.5;
startTime2 = 0;
 }
if (badguy2.y > badpos2.y) {
badguypic2.speedY = -5;
badguy2.speedY = -5;
}
if (badguy2.y < badpos2.y) {
badguypic2.speedY = 5;
badguy2.speedY = 5;
}
 }
if (BadDeath2 < 1) {
if (menu > 0) {
if (badguy2.crashWith(wallright) == false) {
if (badguy2.crashWith(wallleft) == false) {
if (badguy2.crashWith(wall3) == false) {
if (badguy2.crashWith(wall4) == false) {
if (wave < 5) {
if (badguy2.crashWith(wallhouse3) == false) {
if (badguy2.crashWith(wallhouse2_2) == false) {
if (badguy2.crashWith(wallhouse7) == false) {
if (badguy2.crashWith(wallhouse3_2) == false) {
if (badguy2.crashWith(wallhouse2) == false) {
if (badguy2.crashWith(wallhouse5) == false) {
if (badguy2.crashWith(wallhouse1) == false) {
if (badguy2.crashWith(wallhouse4_2) == false) {
if (badguy2.crashWith(wallhouse6_2) == false) {
if (badguy2.crashWith(wallhouse1_2) == false) {
if (badguy2.crashWith(wallhouse4) == false) {
if (badguy2.crashWith(wallhouse6) == false) {
if (badguy2.crashWith(wall2house3) == false) {
if (badguy2.crashWith(wall2house2_2) == false) {
if (badguy2.crashWith(wall2house7) == false) {
if (badguy2.crashWith(wall2house3_2) == false) {
if (badguy2.crashWith(wall2house2) == false) {
if (badguy2.crashWith(wall2house5) == false) {
if (badguy2.crashWith(wall2house1) == false) {
if (badguy2.crashWith(wall2house4_2) == false) {
if (badguy2.crashWith(wall2house6_2) == false) {
if (badguy2.crashWith(wall2house1_2) == false) {
if (badguy2.crashWith(wall2house4) == false) {
if (badguy2.crashWith(wall2house6) == false) {
if (badguy2.x + 5 > box.x + 23) {
    sidebad2 = 0;
}
if (badguy2.x < box.x - 23) {
    sidebad2 = 1;
}
if (sidebad2 == 0) {
if (badguy2.x + 5> box.x + 23) {
badguypic2.speedX = negbadspeedai2;
badguy2.speedX = negbadspeedai2;
if (Badhealth2 <= 50) {
badguypic2.speedX = negbadhurtspeedai2;
badguy2.speedX = negbadhurtspeedai2;
  }
 }
}
if (sidebad2 == 1) {
if (badguy2.x < box.x - 23) {
badguypic2.speedX = badspeedai2;
badguy2.speedX = badspeedai2;
if (Badhealth2 <= 50) {
badguypic2.speedX = badhurtspeedai2;
badguy2.speedX = badhurtspeedai2;
  }
 }
}
if (badguy2.y > box.y) {
badguypic2.speedY = negbadspeedai2;
badguy2.speedY = negbadspeedai2;
if (Badhealth2 <= 50) {
badguypic2.speedY = negbadhurtspeedai2;
badguy2.speedY = negbadhurtspeedai2;
 }
}
if (badguy2.y < box.y) {
badguypic2.speedY = badspeedai2;
badguy2.speedY = badspeedai2;
if (Badhealth2 <= 50) {
badguypic2.speedY = badhurtspeedai2;
badguy2.speedY = badhurtspeedai2;
 }
}
                    } 
	                }
	                }
	                }
	                }
	                }
	                }
	                }
	               }
	              }
	             } 
	            }
	           }
	          }
	         }
	        }
	       }
	      }
	     }
	    }
       }
      }
     }
    }
   }
if (wave < 7 && wave > 4) {
//put wall detect here!!//
if (badguy2.x + 5 > box.x + 23) {
    sidebad2 = 0;
}
if (badguy2.x < box.x - 23) {
    sidebad2 = 1;
}
if (sidebad2 == 0) {
if (badguy2.x + 5> box.x + 23) {
badguypic2.speedX = negbadspeedai2;
badguy2.speedX = negbadspeedai2;
if (Badhealth2 <= 50) {
badguypic2.speedX = negbadhurtspeedai2;
badguy2.speedX = negbadhurtspeedai2;
  }
 }
}
if (sidebad2 == 1) {
if (badguy2.x < box.x - 23) {
badguypic2.speedX = badspeedai2;
badguy2.speedX = badspeedai2;
if (Badhealth2 <= 50) {
badguypic2.speedX = badhurtspeedai2;
badguy2.speedX = badhurtspeedai2;
  }
 }
}
if (badguy2.y > box.y) {
badguypic2.speedY = negbadspeedai2;
badguy2.speedY = negbadspeedai2;
if (Badhealth2 <= 50) {
badguypic2.speedY = negbadhurtspeedai2;
badguy2.speedY = negbadhurtspeedai2;
 }
}
if (badguy2.y < box.y) {
badguypic2.speedY = badspeedai2;
badguy2.speedY = badspeedai2;
if (Badhealth2 <= 50) {
badguypic2.speedY = badhurtspeedai2;
badguy2.speedY = badhurtspeedai2;
 }
}
 }
   }
  }
 }
}
if (box.crashWith(badguy2)) {
if (playerHealth > 0) {
playerHealth -= Bad2DamageDeal;
}
}
if (weapon == 1) {
 if (bullbox.crashWith(badguy2)) {
 if (fire > 0) {
  if (startTime2 == 0) {
  startTime2 = 1;
    }
   }
  }
}
if (startTime2 == 1) {
 badspeedai2 = 0.1;
 negbadspeedai2 = -0.1;
 badhurtspeedai2 = 0.2;
 negbadhurtspeedai2 = -0.1;
   } else 
if (startTime2 == 0) {
 badspeedai2 = 1;
 negbadspeedai2 = -1;
 badhurtspeedai2 = 1.5;
 negbadhurtspeedai2 = -1.5;
   }
 }
 }
 }
}

var Badhealth3 = 0;
var Bad3DamageDeal = 0.12;
function badtriboxspawn() {
if (wave > 4 && wave < 7) {
if (bullbox.crashWith(tribox)) {
if (Badhealth3 >= 0) {
if (fire > 0) {
Badhealth3 -= PlayerDamageDeal;
fire = 0;
  }
 }
}
if (Badhealth3 >= 0) {
BadDeath3 = 0;
 }
if (Badhealth3 == 0) {
BadDeath3 = 1;
 }
 }
}

var BadDeath3 = 1;
var sidebad3 = 0;
var touchwallrightbad3 = 0;
var touchwallleftbad3 = 0;
var touchwallupbad3 = 0;
var touchwalldownbad3 = 0;
var badspeedai3 = 1;
var negbadspeedai3 = -1;
var badhurtspeedai3 = 1.6;
var negbadhurtspeedai3 = -1.6;
function triangleAI() {
if (wave > 4 && wave < 7) {
if (BadDeath3 > 0) {
if (tribox.x > tripos1.x) {
trienemyright.speedX = -5;
trienemyleft.speedX = -5;
tribox.speedX = -5;
}
if (tribox.x < tripos1.x) {
trienemyright.speedX = 5;
trienemyleft.speedX = 5;
tribox.speedX = 5;
}
if (tribox.crashWith(tripos1)) {
trienemyright.speedX = 0;
trienemyright.speedY = 0;
trienemyleft.speedX = 0;
trienemyleft.speedY = 0;
tribox.speedY = 0;
tribox.speedX = 0;
Badhealth3 = 120;
BadDeath3 = 0;
badspeedai3 = 1;
negbadspeedai3 = -1;
badhurtspeedai3 = 1.5;
negbadhurtspeedai3 = -1.5;
startTime3 = 0;
 }
if (tribox.y > tripos1.y) {
trienemyright.speedY = -5;
trienemyleft.speedY = -5;
tribox.speedY = -5;
}
if (tribox.y < tripos1.y) {
trienemyright.speedY = 5;
trienemyleft.speedY = 5;
tribox.speedY = 5;
}
 }
if (BadDeath3 < 1) {
if (menu > 0) {
if (tribox.crashWith(wallright) == false) {
if (tribox.crashWith(wallleft) == false) {
if (tribox.crashWith(wall3) == false) {
if (tribox.crashWith(wall4) == false) {
if (tribox.x + 5 > box.x + 23) {
    sidebad3 = 0;
}
if (tribox.x < box.x - 23) {
    sidebad3 = 1;
}
if (sidebad3 == 0) {
if (tribox.x + 5 > box.x + 23) {
trienemyright.speedX = negbadspeedai3;
trienemyleft.speedX = negbadspeedai3;
tribox.speedX = negbadspeedai3;
if (Badhealth3 <= 50) {
trienemyright.speedX = negbadhurtspeedai3;
trienemyleft.speedX = negbadhurtspeedai3;
tribox.speedX = negbadhurtspeedai3;
  }
 }
}
if (sidebad3 == 1) {
if (tribox.x < box.x - 23) {
trienemyright.speedX = badspeedai3;
trienemyleft.speedX = badspeedai3;
tribox.speedX = badspeedai3;
if (Badhealth3 <= 50) {
trienemyright.speedX = badhurtspeedai3;
trienemyleft.speedX = badhurtspeedai3;
tribox.speedX = badhurtspeedai3;
  }
 }
}
if (tribox.y + 5 > box.y) {
trienemyright.speedY = negbadspeedai3;
trienemyleft.speedY = negbadspeedai3;
tribox.speedY = negbadspeedai3;
if (Badhealth3 <= 50) {
trienemyright.speedY = negbadhurtspeedai3;
trienemyleft.speedY = negbadhurtspeedai3;
tribox.speedY = negbadhurtspeedai3;
 }
}
if (tribox.y + 5 < box.y) {
trienemyright.speedY = badspeedai3;
trienemyleft.speedY = badspeedai3;
tribox.speedY = badspeedai3;
if (Badhealth3 <= 50) {
trienemyright.speedY = badhurtspeedai3;
trienemyleft.speedY = badhurtspeedai3;
tribox.speedY = badhurtspeedai3;
     }
    }
   }
  }
 }
}
if (box.crashWith(tribox)) {
if (playerHealth > 0) {
playerHealth -= Bad3DamageDeal;
 }
}
if (weapon == 1) {
 if (bullbox.crashWith(tribox)) {
 if (fire > 0) {
  if (startTime3 == 0) {
  startTime3 = 1;
    }
   }
  }
}
if (startTime3 == 1) {
 badspeedai3 = 0.5;
 negbadspeedai3 = -0.3;
 badhurtspeedai3 = 0.5;
 negbadhurtspeedai3 = -0.3;
   } else 
if (startTime3 == 0) {
 badspeedai3 = 1;
 negbadspeedai3 = -1;
 badhurtspeedai3 = 1.6;
 negbadhurtspeedai3 = -1.6;
   }
 }
 }
 }
}

var fire = 0;
var fireR = 0;
var fireL = 0;
var fireU = 0;
var fireD = 0;
function shootUp() {
if (Death1 == 0) {
if (fire == 0) {
if (ammo > 0) {
if (box.crashWith(bullbox)) {
fire += 1;
fireU += 1;
ammo -= 1;
if (menu == 0) {
starttime = 1;
}
	}
   }
  }
 }
}

function shootDown() {
if (Death1 == 0) {
if (fire == 0) {
if (ammo > 0) {
if (box.crashWith(bullbox)) {
fire += 1;
fireD += 1;
ammo -= 1;
if (menu == 0) {
starttime = 1;
}
	}
   }
  }
 }
}

function shootLeft() {
if (Death1 == 0) {
if (fire == 0) {
if (ammo > 0) {
if (box.crashWith(bullbox)) {
fire += 1;
fireL += 1;
ammo -= 1;
if (menu == 0) {
starttime = 1;
}
	}
   }
  }
 }
}

function shootRight() {
if (Death1 == 0) {
if (fire == 0) {
if (ammo > 0) {
if (box.crashWith(bullbox)) {
fire += 1;
fireR += 1;
ammo -= 1;
if (menu == 0) {
starttime = 1;
}
	}
   }
  }
 }
}

var starttime = 0;
var timeforbullet = 0;
function resetfire() {
if (starttime == 1) {
timeforbullet += 1;
 }
if (timeforbullet > 100) {
menu += 1;
 }
if (menu > 0) {
starttime = 0;
 }
}

var bullrange = 3;
function bulletai() {
if (fire < 1) {
if (-10 + bullbox.x > box.x) {
	bullbox.speedX = -5;
	bpic.speedX = -5;
}
if (-10 + bullbox.x < box.x) {
	bullbox.speedX = 5;
	bpic.speedX = 5;
}
if (box.crashWith(bullbox)) {
	bullbox.speedX = 0;
	bpic.speedX = 0;
 }
if (-10 + bullbox.y > box.y) {
	bullbox.speedY = -5;
	bpic.speedY = -5;
}
if (-10 + bullbox.y < box.y) {
	bullbox.speedY = 5;
	bpic.speedY = 5;
}
if (box.crashWith(bullbox)) {
	bullbox.speedY = 0;
	bpic.speedY = 0;
 }
}
if (fire > 0) {
 if (fireL > 0) {
  bullbox.speedX -= bullrange;
  bullbox.speedY = 0;
  bpic.speedX -= bullrange;
  bpic.speedY = 0;
  bullettime += 0.5;
  }
 if (fireR > 0) {
  bullbox.speedX += bullrange;
  bullbox.speedY = 0;
  bpic.speedX += bullrange;
  bpic.speedY = 0;
  bullettime += 0.5;
  }
  if (fireU > 0) {
  bullbox.speedX = 0;
  bullbox.speedY -= bullrange;
  bpic.speedY -= bullrange;
  bpic.speedX = 0;
  bullettime += 0.5;
  }
  if (fireD > 0) {
  bullbox.speedX = 0;
  bullbox.speedY += bullrange;
  bpic.speedY += bullrange;
  bpic.speedX = 0;
  bullettime += 0.5;
  }
 if (bullettime >= 5) {
  fire = 0;
  fireR = 0;
  fireL = 0;
  fireU = 0;
  fireD = 0;
  bullettime = 0;
  }
 }
if (bullbox.crashWith(wallright) || bullbox.crashWith(wallleft) || bullbox.crashWith(wall3) || bullbox.crashWith(wall4)) {
fire = 0;
 }
if (wave < 5) {
if (bullbox.crashWith(wallhouse3) || bullbox.crashWith(wallhouse2_2) || bullbox.crashWith(wallhouse7) || bullbox.crashWith(wallhouse3_2) || bullbox.crashWith(wallhouse2) || bullbox.crashWith(wallhouse5) || bullbox.crashWith(wallhouse1) || bullbox.crashWith(wallhouse4_2) || bullbox.crashWith(wallhouse6_2) || bullbox.crashWith(wallhouse1_2) || bullbox.crashWith(wallhouse4) || bullbox.crashWith(wallhouse6) || bullbox.crashWith(wall2house3) || bullbox.crashWith(wall2house2_2) || bullbox.crashWith(wall2house7) || bullbox.crashWith(wall2house3_2) || bullbox.crashWith(wall2house2) || bullbox.crashWith(wall2house5) || bullbox.crashWith(wall2house1) || bullbox.crashWith(wall2house4_2) || bullbox.crashWith(wall2house6_2) || bullbox.crashWith(wall2house1_2) || bullbox.crashWith(wall2house4) || bullbox.crashWith(wall2house6)) {
fire = 0;
  }
 }
}

var bullettime = 0;
var touchleft = 0;
var touchright = 0;
var touchtop = 0;
var touchbottom = 0;
var up = 0;
var down = 0;
var left = 0;
var right = 0;
function moveUp() {
 if (touchtop == 0) {
up = 1;
}
}

function moveDown() {
 if (touchbottom == 0) {
down = 1;
}
}

function moveLeft() {
 if (touchleft == 0) {
left = 1;
}
}

function moveRight() {
 if (touchright == 0) {
right = 1;
}
}

function clearmoveu() {
 if (box.crashWith(wall3) == false) {
 touchtop = 0;
 }
 if (wave < 5) {
 if (box.crashWith(wallhouse1) == false) {
 touchtop = 0;
 }
 if (box.crashWith(wallhouse4_2) == false) {
 touchtop = 0;
 }
 if (box.crashWith(wallhouse6_2) == false) {
 touchtop = 0;
 }
 if (box.crashWith(wall2house1) == false) {
 touchtop = 0;
 }
 if (box.crashWith(wall2house4_2) == false) {
 touchtop = 0;
 }
 if (box.crashWith(wall2house6_2) == false) {
 touchtop = 0;
 }
}
 up = 0;
circle.speedY = 0;
box.speedY = 0;
}

function clearmoved() {
 if (box.crashWith(wall4) == false) {
 touchbottom = 0;
 }
 if (wave < 5) {
 if (box.crashWith(wallhouse1_2) == false) {
 touchbottom = 0;
 }
 if (box.crashWith(wallhouse4) == false) {
 touchbottom = 0;
 }
 if (box.crashWith(wallhouse6) == false) {
 touchbottom = 0;
 }
 if (box.crashWith(wall2house1_2) == false) {
 touchbottom = 0;
 }
 if (box.crashWith(wall2house4) == false) {
 touchbottom = 0;
 }
 if (box.crashWith(wall2house6) == false) {
 touchbottom = 0;
 }
}
 down = 0;
circle.speedY = 0;
box.speedY = 0;
}

function clearmovel() {
 if (box.crashWith(wallleft) == false) {
 touchleft = 0;
 }
 if (wave < 5) {
 if (box.crashWith(wallhouse2) == false) {
 touchleft = 0;
 }
 if (box.crashWith(wallhouse3_2) == false) {
 touchleft = 0;
 }
 if (box.crashWith(wallhouse5) == false) {
 touchbottom = 0;
 }
 if (box.crashWith(wall2house2) == false) {
 touchleft = 0;
 }
 if (box.crashWith(wall2house3_2) == false) {
 touchleft = 0;
 }
 if (box.crashWith(wall2house5) == false) {
 touchbottom = 0;
 }
}
 left = 0;
circle.speedX = 0;
box.speedX = 0;
}

function clearmover() {
 if (box.crashWith(wallright) == false) {
 touchright = 0;
 }
 if (wave < 5) {
 if (box.crashWith(wallhouse2_2) == false) {
 touchright = 0;
 }
 if (box.crashWith(wallhouse3) == false) {
 touchright = 0;
 }
 if (box.crashWith(wallhouse7) == false) {
 touchright = 0;
 }
 if (box.crashWith(wall2house2_2) == false) {
 touchright = 0;
 }
 if (box.crashWith(wall2house3) == false) {
 touchright = 0;
 }
 if (box.crashWith(wall2house7) == false) {
 touchright = 0;
 }
}
 right = 0;
circle.speedX = 0;
box.speedX = 0;
}

var sound = 0
function playSound() {
if (sound == 0) {
if (menu > 0) {
document.getElementById('level1').play();
  }
 }
if (sound == 1) {
if (menu > 0) {
document.getElementById('level2').play();
  }
 }
if (sound > 1) {
sound = 0;
 }
}

function SetVolume(val) {
var player = document.getElementById('level1');
player.volume = val / 100;
var player2 = document.getElementById('level2');
player2.volume = val / 100;
}

function skipSound() {
 if (sound > 0) {
 level1.pause();
 level1.currentTime = 0;
 }
 if (sound < 1) {
 level2.pause();
 level2.currentTime = 0;
 }
}

var namebX = 620;
var namebY = 450;
var ammocheat = "moreammo";
var healthcheat = "morehealth";
var wavebonus = "ryanmace";
var testwave = "test";
var resetcheat = "reset";
var fullcheat = "FULLYMAXED"
function name() {
 var nameg = "Name:"
 var name = document.getElementById('name');
 namef = new component("30px", "Consolas", "white", namebX, namebY, "text");
 m = new component(300, 20, "gray", namebX - 5, namebY - 15, "img4");
 namef.font="20px Consolas";
 namef.text=nameg + name.value;
 m.update();
 namef.update();
 if (name.value == ammocheat) {
 ammo = 160;
 }
 if (name.value == healthcheat) {
 playerHealth = 100;
 }
 if (name.value == fullcheat) {
 playerHealth = 100;
 ammo = 160;
 }
 if (name.value == wavebonus) {
 wave = 9000;
 }
 if (name.value == testwave) {
 wave = 5;
 }
 if (name.value == resetcheat) {
 document.location.reload(true);
 }
}

var money = 100;
var mbX = 580;
var mbY = 480;
function playerMoney() {
 var moneyg = "$"
 moneyf = new component("30px", "Consolas", "green", mbX, mbY, "text");
 q = new component(300, 100, "gray", mbX - 5, mbY - 25, "img4");
 mbo = new component(300, 100, "gray", 570, 450, "img3");
 nbo = new component(300, 100, "gray", 610, 430, "img3");
 moneyf.font="30px Consolas";
 moneyf.text=moneyg + Math.round(money);
 nbo.update();
 mbo.update();
 q.update();
 moneyf.update();
}

var stopper = 0;
function swapweap1() {
	weapon = 0;
}

function swapweap2() {
if (weaponupgrade1 == 1) {
    weapon = 1;
 }
}

function backfunc() {
   if (upgrademenu > 0) {
			upgrademenu = 0;
		}
}
	
function upgrade1func() {	
		if (weaponupgrade1 == 0) {
		if (money >= 100) {
			weaponupgrade1 = 1;
			money -= 100;
		}
	   }
}
</script>
<label class="unselectable">
<h1 align=center>
 Homeworld Takedown V0.4.4
</h1>
<p align="center">Volume:</p>
<p align="center"><input type="range" min="0" max="100" id="volume" class="slider" step="1" oninput="SetVolume(this.value)" onchange="SetVolume(this.value)"></input></p>
<p align="center"><input type="text" id="name" value=""></p>
<p align="center">Controls:</p>
<p align="center">Arrow key to shoot.</p>
<p align="center">WASD to move.</p>
<p align="center">R to revive.</p>
<p align="center">Number keys to switch weapons. (NOT THE NUM PAD! aslo get weapons by upgrading your weapon)</p>
<p align="center">Num pad to upgrade. (numbers correspond with numbers in the upgrade menu labeled with # in front of it)</p>
<p align="center">About:</p>
<p align="center">Flying Enemies- Rage mode: if the enemy's health drops below 50 it will move faster. </p>
<p align="center">Flying Enemies- Swarm: if they get near you they will frantically go left and right thus making them hard to hit.</p>
<p align="center">Homeworld Takedown is a top down wave based game. You play as an alien from the "Drars" race and you don't agree on taking over Earth so you fight back.</p>
</label>
</body>
</html>
