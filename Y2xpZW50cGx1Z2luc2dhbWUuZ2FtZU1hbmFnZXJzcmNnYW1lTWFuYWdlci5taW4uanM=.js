/** Copyright (c) 2016 WIMI5. All rights reserved. */ (function(){var g=void 0,l=this;function r(c){c=c.split(".");var d=l;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)d=d[e]?d[e]:d[e]={}};r("PENGO.client.plugins.game.gameManager.module");
window.PENGO.client.plugins.game.gameManager.module.resolve=function(c){function d(){var a=this;this.c=this.a=g;this.f=function(b){return"chromews"===a.b.type&&"name"===b?window.chrome.runtime.getManifest().name:a.a[b]}}var e=c.util.object,h=c.pengoError.pengoError.StoredPengoError;d.prototype={g:function(a,b){if(e.isObject(a)){if(a.errorsStore===g||"string"!==typeof a.errorsStore)throw new c.pengoError.pengoError.PengoError("Expected config. param. 'errorsStore' must be a defined string, it is '"+a.errorsStore+
"'",c.pengoError.codes.codes.INVALID_DATA);if(a.gameDescriptor===g||"string"!==typeof a.gameDescriptor)throw new h(a.errorsStore,"md:cgf#1",["gameDescriptor","string",a.gameDescriptor]);if(a.resourcesPath===g||"string"!==typeof a.resourcesPath)throw new h(a.errorsStore,"md:cgf#1",["resourcesPath","string",a.resourcesPath]);}else throw new c.pengoError.pengoError.PengoError("Configuration must be a defined Object",c.pengoError.codes.codes.NOT_FOUND);this.b=a;b&&b.type&&(this.b.type=b.type)},d:function(a){if(a.id===
g||"string"!==typeof a.id)throw new h(this.b.errorsStore,"md:gd#1",["id",a.id]);if(a.version===g||"string"!==typeof a.version)throw new h(this.b.errorsStore,"md:gd#1",["version",a.version]);if(a.resources===g||"string"!==typeof a.resources)throw new h(this.b.errorsStore,"md:gd#1",["resources",a.resources]);},start:function(a,b,d){var e,h,f;e=window.location.pathname.split("index.html").join("");h="integrated"===this.b.mode?window.location.protocol+"//"+window.location.host:"";f=h+(this.b.resourcesPath+
e+"/"+this.b.gameDescriptor).replace("//","/");f=f+"?yihaa="+Math.random();this.c=a;this.a===g?c.require.require.requireJSON(f,function(a,c){if(!a)try{this.a=JSON.parse(c),this.d(this.a),this.a.root=e,this.a.origin=h,Object.freeze(this.a)}catch(f){this.a=g,a=f}b.call(d||this,a)},this):b.call(d||this)},stop:function(){this.c=this.a=g}};return d};r("PENGO.client.plugins.game.gameManager.errors");window.PENGO.client.plugins.game.gameManager.errors.resolve=function(c){return{h:g,e:{"md:cgf#1":{msg:!1,code:c.pengoError.codes.codes.INVALID_DATA},"md:gd#1":{msg:!1,code:c.pengoError.codes.codes.INVALID_DATA}}}};r("PENGO.client.plugins.game.gameManager.activator");
(function(){function c(){b.off("SERVICE_REGISTERED",c);if(b.getService("igloo.logger")[0]){f||(f=new p.module);try{f.g(m.config,n)}catch(a){b.getService("igloo.fatal")[0].handleFatal({Message:a.message,Source:"Setting plugin '"+b.getPluginId()+"'"});return}f.start(b.getService("igloo.logger")[0],function(a){a?b.getService("igloo.fatal")[0].handleFatal({Message:"Error '"+a.message+"' while starting plugin '"+b.getPluginId()+"'",Source:"Starting plugin '"+b.getPluginId()+"'"}):(k={functions:{getGameProperty:f.f},
properties:{}},b.register(h,k),b.on("SERVICE_UNREGISTERED",e),b.on("SERVICE_UPDATED",q))},this)}else b.on("SERVICE_REGISTERED",c)}function d(d,s){k!==g&&b.unregister(h,k);f!==g&&f.stop();b.off("SERVICE_UNREGISTERED",e);b.off("SERVICE_UPDATED",q);if(d&&!s)b.on("SERVICE_REGISTERED",c);else b.off("SERVICE_REGISTERED",c);a.remove(m.config.errorsStore)}function e(){}var h="game.gameManager",a,b,n,p,m,f,k,q=e;window.PENGO.client.plugins.game.gameManager.activator.activator=function(e,f){a=e.pengoError.pengoError.storage;
return{start:function(d,e,h,k){b=d;m=e;n=k;p=f;a.add(e.config.errorsStore,f.errors.e);c()},stop:d}}})();})();
