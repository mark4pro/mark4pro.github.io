<!DOCTYPE html>
<html>
<head>
<title>Tank War Beta</title>
<link rel="apple-touch-icon" sizes="57x57" href="https://mark4pro.github.io/TankWar/images/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="https://mark4pro.github.io/TankWar/images/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="https://mark4pro.github.io/TankWar/images/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="https://mark4pro.github.io/TankWar/images/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="https://mark4pro.github.io/TankWar/images/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="https://mark4pro.github.io/TankWar/images/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="https://mark4pro.github.io/TankWar/images/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="https://mark4pro.github.io/TankWar/images/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="https://mark4pro.github.io/TankWar/images/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="https://mark4pro.github.io/TankWar/images/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://mark4pro.github.io/TankWar/images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="https://mark4pro.github.io/TankWar/images/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://mark4pro.github.io/TankWar/images/favicon-16x16.png">
<link rel="manifest" href="https://mark4pro.github.io/TankWar/images/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="https://mark4pro.github.io/TankWar/images/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
body {
	margin: 0;
	background-color: black;
	overflow: hidden;
}
canvas {
	background-color: black;
	position: fixed;
	image-rendering: -moz-crisp-edges;         /* Firefox */
	image-rendering: -webkit-crisp-edges;      /* Webkit */
	-ms-interpolation-mode: nearest-neighbor;  /* IE (non-standard property) */
	image-rendering: crisp-edges;                /* Chrome */
}
.unselectable {
   -moz-user-select: -moz-none;
   -khtml-user-select: none;
   -webkit-user-select: none;
   -ms-user-select: none;
   user-select: none;
}
</style>
<img id="Tank1" width="0" height="0" src="https://mark4pro.github.io/TankWar/images/Tank1_pic.png">
<img id="Tank2" width="0" height="0" src="https://mark4pro.github.io/TankWar/images/Tank2_pic.png">
<img id="Tank1Bull" width="0" height="0" src="https://mark4pro.github.io/TankWar/images/BlueBull.png">
<img id="Tank2Bull" width="0" height="0" src="https://mark4pro.github.io/TankWar/images/RedBull.png">
<img id="Death" width="0" height="0" src="https://mark4pro.github.io/TankWar/images/Death.png">
</head>
<body id="BGColor" onload="startGame()">
<canvas id="canvas"></canvas>
<button id="okG" style="cursor:pointer;color:black;background-color:purple;border:0px;width:80px;height:50px;font:15px Arial;text-align:center;position:absolute;right:0.5%;top:3%;opacity:0.5;">Ok</button>
<div id="upgrades"><button id="upG" onmouseup="up1StatsUnlocker()" onmousedown="up1Stats()" style="cursor:pointer;color:black;background-color:purple;border:0px;width:200px;height:50px;font:20px Arial;text-align:center;position:absolute;right:50%;left:50%;top:20%;transform:translate(-50%,-50%);opacity:0.5;">Bullet Size</button>
</div>
<button id="pauseG" style="cursor:pointer;color:black;background-color:purple;border:0px;width:80px;height:50px;font:15px Arial;text-align:center;position:absolute;right:0.5%;top:3%;opacity:0.5;">PAUSE</button>
<h1 unselectable="on" class="unselectable" id="welcome" style="color:blue;text-align:center;font:36px Arial;"><b>Welcome To Tank War Beta!</b></h1>
<button id="startG" style="cursor:pointer;color:red;background-color:blue;border:0px;width:200px;height:50px;font:30px Arial;text-align:center;position:absolute;right:50%;left:50%;top:20%;transform:translate(-50%,-50%);">PLAY</button>
<div id="BGT"><p unselectable="on" class="unselectable" style="color:red;position:absolute;right:50%;left:45%;top:30%;transform:translate(-50%,-50%);">Red<input type="range" min="0" max="255" value="0" id="red" style="outline:none;cursor:pointer;width:250px;height:25px;background:red;"></p>
<p unselectable="on" class="unselectable" style="color:green;position:absolute;right:50%;left:45%;top:40%;transform:translate(-50%,-50%);">Green<input type="range" min="0" max="255" value="0" id="green" style="outline:none;cursor:pointer;width:250px;height:25px;background:green;"></p>
<p unselectable="on" class="unselectable" style="color:blue;position:absolute;right:50%;left:45%;top:50%;transform:translate(-50%,-50%);">Blue<input type="range" min="0" max="255" value="0" id="blue" style="outline:none;cursor:pointer;width:250px;height:25px;background:blue;"></p>
<p unselectable="on" class="unselectable" id="waveNum" style="color:blue;position:absolute;right:50%;left:42.5%;top:55%;width:200px;"></p>
<p unselectable="on" class="unselectable" style="color:blue;position:absolute;right:50%;left:45%;top:60%;transform:translate(-50%,-50%);"><input type="range" min="1" max="50" value="10" id="wave" style="outline:none;cursor:pointer;width:250px;height:25px;"></p></div>
<script>
var keys = {};
window.addEventListener("keydown",
    function(e){
        keys[e.keyCode] = true;
        switch(e.keyCode){
            case 37: case 39: case 38:  case 40: // Arrow keys
            case 32: e.preventDefault(); break; // Space
            default: break; // do not block other keys
        }
    },
false);
window.addEventListener('keyup',
    function(e){
        keys[e.keyCode] = false;
    },
false);

startG.onclick = function() {
pause = false;
startG.style.display = "none";
BGT.style.display = "none";
};

pauseG.onclick = function() {
pause = true;
startG.style.display = "initial";
BGT.style.display = "initial";
};

var start = 1;
function startGame() {
	Tank1 = new component("player1", 30, 30, "blue", 50, 120, "rec");
	Tank1pic1 = new component("", 30, 30, "Tank1", 50, 120, "img");
	moveButtonDetect = new component("", 80, 50, "blue", 10, 25, "rec");
	moveButton = new component("", 80, 50, "blue", 50, 50, "rec");
	TP = new component("", 0, 0, "black", 40, 62.5, "text");
	TP.font = "36px Arial";
	Tank2 = new component("player2", 30, 30, "red", window.innerWidth - 50, window.innerHeight - 120, "rec");
	Tank2pic1 = new component("", 30, 30, "Tank2", window.innerWidth - 50, window.innerHeight - 120, "img");
	moveButtonDetect2 = new component("", 80, 50, "red", window.innerWidth - 90, window.innerHeight - 75, "rec");
	moveButton2 = new component("", 80, 50, "red", window.innerWidth - 50, window.innerHeight - 50, "rec");
	TP2 = new component("", 0, 0, "black", window.innerWidth - 60, window.innerHeight - 38.5, "text");
	TP2.font = "36px Arial";
	moveButtonDetect3 = new component("", 180, 50, "darkpurple", window.innerWidth / 2 - 90, window.innerHeight / 2, "rec");
    moveButton3 = new component("", 180, 50, "purple", window.innerWidth / 2, window.innerHeight / 2, "rec");
	background = new component("", 10000000, 10000000, "black", 100, 0, "rec");
	DeathTxt = new component("Blue Wins!", 0, 0, "white", window.innerWidth / 2 - 82, window.innerHeight / 2 + 15, "text");
    DeathTxt.font = "36px Arial";
    DeathTxt2 = new component("Red Wins!", 0, 0, "white", window.innerWidth / 2 - 82, window.innerHeight / 2 + 15, "text");
    DeathTxt2.font = "36px Arial";
    DeathTxt3 = new component("Tie!", 0, 0, "white", window.innerWidth / 2 - 82, window.innerHeight / 2 + 15, "text");
    DeathTxt3.font = "36px Arial";
	GameArea.start();
}

var up1Lock = 0;
function up1Stats() {
if (Tank1.UpgradePoints > 0 && Tank1.UpgradeTurn == true && up1Lock == 0) {
Tank1.UpgradePoints--;
Tank1.bulletSize++;
up1Lock++;
 }
if (Tank2.UpgradePoints > 0 && Tank2.UpgradeTurn == true && up1Lock == 0) {
Tank2.UpgradePoints--;
Tank2.bulletSize++;
up1Lock++;
 }
}
function up1StatsUnlocker() {
up1Lock = 0;
}

var turnLock = 0;
var countL = 0;
okG.onclick = function() {
countL++;
if (Tank1.UpgradeTurn == true && turnLock == 0) {
Tank1.UpgradeTurn = false;
Tank2.UpgradeTurn = true;
turnLock = 1;
 }
if (Tank2.UpgradeTurn == true && turnLock == 0) {
Tank2.UpgradeTurn = false;
Tank1.UpgradeTurn = true;
turnLock = 1;
 }
if (turnLock == 1 && countL != 1) {
Tank2.UpgradeTurn = false;
Tank1.UpgradeTurn = false;
countL = 0;
upgradeMenu = 0;
turnLock = 0;
 }
}

var pause = true;
var GameArea = {
	start : function() {
	    var canvas = document.getElementById('canvas');
		this.context = canvas.getContext("2d");
		document.body.insertBefore(canvas, document.body.childNodes[0]);
		this.interval = setInterval(updateGameArea, 10);
		window.addEventListener('mousedown', function (e) {
			GameArea.x = e.pageX;
			GameArea.y = e.pageY;
		})
		window.addEventListener('mouseup', function (e) {
			GameArea.x = false;
			GameArea.y = false;
		})
		window.addEventListener('touchstart', function (e) {
			GameArea.x = e.pageX;
			GameArea.y = e.pageY;
		})
		window.addEventListener('touchend', function (e) {
			GameArea.x = false;
			GameArea.y = false;
		})
	}, 
	updateGame : function(){
		this.context.clearRect(0, 0, canvas.width, canvas.height);
		canvas.width = window.innerWidth;
		canvas.height = window.innerHeight;
		moveButtonDetect2.x = window.innerWidth - 90;
        moveButtonDetect2.y = window.innerHeight - 75;
        moveButton2.x = window.innerWidth - 50;
        moveButton2.y = window.innerHeight - 50;
        TP2.x = window.innerWidth - 60;
        TP2.y = window.innerHeight - 38.5;
		moveButtonDetect3.x = window.innerWidth / 2 - 90;
        moveButtonDetect3.y = window.innerHeight / 2;
        moveButton3.x = window.innerWidth / 2;
        moveButton3.y =	window.innerHeight / 2;
		DeathTxt.x = window.innerWidth / 2 - 82;
        DeathTxt.y = window.innerHeight / 2 + 15;
        DeathTxt2.x = window.innerWidth / 2 - 82;
        DeathTxt2.y = window.innerHeight / 2 + 15;
        DeathTxt3.x = window.innerWidth / 2 - 82;
        DeathTxt3.y	= window.innerHeight / 2 + 15;
		Tank1pic1.x = Tank1.x;
		Tank1pic1.y = Tank1.y;
		Tank2pic1.x = Tank2.x;
		Tank2pic1.y = Tank2.y;
		Tank1pic1.angle = Tank1.angle;
		Tank2pic1.angle = Tank2.angle;
		if (pause == true) {
		GameArea.pause();
		}
		if (pause == false) {
		GameArea.unpause();
		}
	},
	pause : function(){
    canvas.style.display = "none";
    pauseG.style.display = "none";
    },
    unpause : function(){
    canvas.style.display = "initial";
    pauseG.style.display = "initial";
  },
}

var _bullets = [];
function component(name, width, height, color, x, y, type, id) {
	this.type = type;
	this.color = color;
	this.width = width;
	this.height = height;
	this.id = id;
	this.name = name;
	this.text = name;
	this.speed = 0;
	this.bulletspeed = -10;
	this.bulletSize = 2;
	this.angle = 0;
	this.moveAngle = 0;
	this.dead = false;
	this.points = 0;
	this.UpgradePoints = 0;
	this.UpgradeTurn = false;
	this.x = x;
	this.y = y;	
	this.update = function() {
		ctx = GameArea.context;
		if (this.type == "text") {
		ctx.fillStyle = color;
	    ctx.font = this.font;
	    ctx.fillText(this.text, this.x, this.y);
	    }
	    if (this.type == "rec") {
		ctx.save();
		ctx.translate(this.x, this.y);
		ctx.rotate(this.angle);
		ctx.fillStyle = this.color;
		ctx.fillRect(this.width / -2, this.height / -2, this.width, this.height);
		ctx.restore();	
		}
		if (this.type == "img" || this.type == "Bull") {
		ctx.save();
        ctx.translate(this.x, this.y);
        ctx.rotate(this.angle);
		var img = document.getElementById(this.color);
        ctx.drawImage(img, this.width / -2, this.height / -2, this.width, this.height);
        ctx.restore();
		}
	}
	this.newPos = function() {
		this.angle += this.moveAngle * Math.PI / 180;
		this.x += this.speed * Math.sin(this.angle);
		this.y -= this.speed * Math.cos(this.angle);
		if (this.type == "Bull") {
	    if (this.id == "Tank1") {
		this.bulletspeed = -10;
		this.x += this.bulletspeed * Math.sin(Tank1.angle);
		this.y -= this.bulletspeed * Math.cos(Tank1.angle);
		 }
		if (this.id == "Tank2") {
		this.bulletspeed = -10;
		this.x += this.bulletspeed * Math.sin(Tank2.angle);
		this.y -= this.bulletspeed * Math.cos(Tank2.angle);
		 }
		}
	}
	this.clicked = function() {
		var myleft = this.x;
		var myright = this.x + (this.width);
		var mytop = this.y;
		var mybottom = this.y + (this.height);
		var clicked = true;
		if (startgame == 0) {
		Tank1.speed = 0;
		Tank2.speed = 0; 
		Tank1.angle += 1 * Math.PI / -180; 
		Tank2.angle += 1 * Math.PI / 180;   
		}
		if ((mybottom < GameArea.y) || (mytop > GameArea.y) || (myright < GameArea.x) || (myleft > GameArea.x)) {
			clicked = false;
		}
		return clicked;
	}
	if (name == "player1") {
	this.shoot = function(){
	if(this.dead === false){
	var __bullet = new component("", this.bulletSize, this.bulletSize, "Tank1Bull", Tank1.x, Tank1.y, "Bull", "Tank1");
	_bullets.push(__bullet);
	if (this.id == "Tank1") {
	    this.angle += Tank1.moveAngle * Math.PI / 180;
		 }
	}
   }
  } else
  if (name == "player2") {
	this.shoot = function(){
	if(this.dead === false){
	var __bullet = new component("", this.bulletSize, this.bulletSize, "Tank2Bull", Tank2.x, Tank2.y, "Bull", "Tank2");
	_bullets.push(__bullet);
	if (this.id == "Tank2") {
		this.angle += Tank2.moveAngle * Math.PI / 180;
		 }
	}
   }
  }
}

var startgame = 0;
var startmove = 0;
var startmove2 = 0;
var dirSwitch = 0;
var dirSwitch2 = 0;
var lock = 0;
var lock2 = 0;
var firetime = 10;
var firetime2 = 10;
var firenum = 0;
var firenum2 = 0;
var upgradeMenu = 0;
var MenuColor = "purple";
var pointLock = 0;
var win = false;
function updateGameArea() {
GameArea.updateGame();
var numOfWaves = document.getElementById('wave').value;
var redC = document.getElementById('red').value;
var greenC = document.getElementById('green').value;
var blueC = document.getElementById('blue').value;
document.getElementById('waveNum').innerHTML = "Number Of Waves: " + numOfWaves;
BGColor.style.backgroundColor = "rgb("+redC+", "+greenC+", "+blueC+")";
	TP.text = Tank1.points;
	TP2.text = Tank2.points;
		if (button_down == true && upgradeMenu == 0) {
			Tank1.speed = -2;
			Tank1pic1.speed = -2;
			startmove = 1;
			firenum += 1;
			if (firenum == firetime) {
			Tank1.shoot();
			}
			if (lock == 0) {
			dirSwitch += 1;
			lock = 1;
			}
		}
		if (button_down == false) {
			Tank1.speed = 0;
			Tank1pic1.speed = 0;
			startgame = 1;
			startmove = 0;
			firenum = 0;
			lock = 0;
		}
		if (button2_down == true && upgradeMenu == 0) {
			Tank2.speed = -2;
			Tank2pic1.speed = -2;
			startmove2 = 1;
			firenum2 += 1;
			if (firenum2 == firetime2) {
			Tank2.shoot();
			}
			if (lock2 == 0) {
			dirSwitch2 += 1;
			lock2 = 1;
			}
		}
		if (button2_down == false) {
			Tank2.speed = 0;
			Tank2pic1.speed = 0;
			startgame = 1;
			startmove2 = 0;
			lock2 = 0;
		}
		if (firenum > firetime) {
		firenum = 0;
		}
		if (firenum2 > firetime2) {
		firenum2 = 0;
		}
		for(var j = _bullets.length - 1; j >= 0; j--) {
		if (_bullets[j].id == "Tank2" && Tank1.dead === false && collision2(Tank1, _bullets[j])) {
		_bullets.splice(j, 1);
		Tank1.dead = true;
		Tank2.points++;
		 }
		}
		for(var k = _bullets.length - 1; k >= 0; k--) {
		if (_bullets[k].id == "Tank1" && Tank2.dead === false && collision2(Tank2, _bullets[k])) {
		_bullets.splice(k, 1);
		Tank2.dead = true;
		Tank1.points++;
		 }
		}
		if (upgradeMenu == 0) {
		pointLock = 0;
		}
		if (Tank1.dead) {
		Tank1pic1.color = "Death";
		Tank1.speed = 0;
		Tank1pic1.speed = 0;
		Tank1.angle = 0;
		Tank1pic1.angle = 0;
		Tank2.speed = 0;
		Tank2pic1.speed = 0;
		Tank2.angle = 0;
		Tank2pic1.angle = 0;
		button_down = false;
		button2_down = false;
		 _bullets.length = 0;
		
		function deadTank1Reset(){
		  upgradeMenu = 1;
		  if (pointLock == 0) {
		  Tank2.UpgradePoints += 2;
		  Tank1.UpgradePoints += 1;
		  pointLock = 1;
		  }
		  Tank2.UpgradeTurn = true;
		  Tank1.dead = false;
		  Tank1pic1.color = "Tank1";
		  Tank1.x = 50;
		  Tank1.y = 120;
		  Tank1pic1.x = 50;
		  Tank1pic1.y = 120;
		  Tank2.x = window.innerWidth - 50;
		  Tank2.y = window.innerHeight - 120;
		  Tank2pic1.x = window.innerWidth - 50;
		  Tank2pic1.y = window.innerHeight - 120;
		  Tank1.speed = 0;
		  Tank2.speed = 0;
		  Tank2pic1.speed = 0;
		  Tank1pic1.speed = 0;
		 } setTimeout(deadTank1Reset, 1000);
		}
		if (Tank2.dead) {
		Tank2pic1.color = "Death";
		Tank2.speed = 0;
		Tank2pic1.speed = 0;
		Tank2.angle = 0;
		Tank2pic1.angle = 0;
		Tank1.speed = 0;
		Tank1pic1.speed = 0;
		Tank1.angle = 0;
		Tank1pic1.angle = 0;
		button_down = false;
		button2_down = false;
		_bullets.length = 0;
		
		function deadTank2Reset(){
		  upgradeMenu = 1;
		  if (pointLock == 0) {
		  Tank2.UpgradePoints += 1;
		  Tank1.UpgradePoints += 2;
		  pointLock = 1;
		  }
		  Tank1.UpgradeTurn = true;
		  Tank2.dead = false;
		  Tank2pic1.color = "Tank2";
		  Tank1.x = 50;
		  Tank1.y = 120;
		  Tank1pic1.x = 50;
		  Tank1pic1.y = 120;
		  Tank2.x = window.innerWidth - 50;
		  Tank2.y = window.innerHeight - 120;
		  Tank2pic1.x = window.innerWidth - 50;
		  Tank2pic1.y = window.innerHeight - 120;
		  Tank1.speed = 0;
		  Tank1pic1.speed = 0;
		  Tank2.speed = 0;
		  Tank2pic1.speed = 0;
		 } setTimeout(deadTank2Reset, 1000);
		}
		if (Tank1.UpgradeTurn == true && Tank2.UpgradeTurn == true) {
		var breakTurn = Math.floor(Math.random() * 2);
		if (breakTurn == 1) {
		Tank2.UpgradeTurn = false;
		} else {
		Tank1.UpgradeTurn = false;
		}
		}
		if (Tank1.y <= 5) {
			Tank1.y += window.innerHeight - 5;
			Tank1pic1.y += window.innerHeight - 5;
		}
		if (Tank1.y >= window.innerHeight - 5) {
			Tank1.y -= window.innerHeight - 5;
			Tank1pic1.y -= window.innerHeight - 5;
		}
		if (Tank1.x <= 0) {
			Tank1.x += window.innerWidth;
			Tank1pic1.x += window.innerWidth;
		}
		if (Tank1.x >= window.innerWidth) {
			Tank1.x -= window.innerWidth;
			Tank1pic1.x -= window.innerWidth;
		}
		if (Tank2.y <= 5) {
			Tank2.y += window.innerHeight - 5;
			Tank2pic1.y += window.innerHeight - 5;
		}
		if (Tank2.y >= window.innerHeight - 5) {
			Tank2.y -= window.innerHeight - 5;
			Tank2pic1.y -= window.innerHeight - 5;
		}
		if (Tank2.x <= 0) {
			Tank2.x += window.innerWidth;
			Tank2pic1.x += window.innerWidth;
		}
		if (Tank2.x >= window.innerWidth) {
			Tank2.x -= window.innerWidth;
			Tank2pic1.x -= window.innerWidth;
		}
	if (win == false) {
	moveButtonDetect.update();
    moveButtonDetect2.update();
	} else {
	moveButtonDetect3.update();
	}
    Tank1.update();
	Tank2.update();
	if (upgradeMenu == 0) {
	background.update();
	}
	if (dirSwitch  > 1) {
		dirSwitch = 0;
	}
	if (dirSwitch2  > 1) {
		dirSwitch2 = 0;
	}
	if (startmove == 0 && upgradeMenu == 0) {
	if (dirSwitch == 0) {
	Tank1.angle += 1 * Math.PI / -180; 
	Tank1pic1.angle += 1 * Math.PI / -180;
	 }
	if (dirSwitch == 1) {
	Tank1.angle += 1 * Math.PI / 180; 
	Tank1pic1.angle += 1 * Math.PI / 180;
	  }
	}
	for (var i = _bullets.length - 1; i >= 0; i--){
	_bullets[i].update();
	_bullets[i].newPos();
	if (_bullets[i].x <= 0 || _bullets[i].x >= window.innerWidth || _bullets[i].y >= window.innerHeight || _bullets[i].y <= 0){
	  _bullets.splice(i, 1);
	}
   }
	Tank1pic1.update();
	Tank1.newPos();
	Tank1pic1.newPos();
	if (startmove2 == 0 && upgradeMenu == 0) {
	if (dirSwitch2 == 0) {
	Tank2.angle += 1 * Math.PI / 180; 
    Tank2pic1.angle += 1 * Math.PI / 180;	
	 }
	if (dirSwitch2 == 1) {
	Tank2.angle += 1 * Math.PI / -180;
	Tank2pic1.angle += 1 * Math.PI / -180;
	  }
	}
	Tank2pic1.update();
	Tank2.newPos();
	Tank2pic1.newPos();
	if(collision2(Tank1, Tank2)){
	if(Tank1.x < Tank2.x){
	  Tank1.x = Tank1.x - 1;
	  Tank1pic1.x = Tank1.x - 1;
	  Tank1.y = Tank1.y - 1;
	  Tank1pic1.y = Tank1.y - 1;
	  Tank2.x = Tank2.x + 1;
	  Tank2pic1 = Tank2.x + 1;
	  Tank2.y = Tank2.y + 1;
	  Tank2pic1.y = Tank2.y + 1
	}
	else if(Tank1.x > Tank2.x){
	  Tank1.x = Tank1.x + 1;
	  Tank1pic1.x = Tank1.x + 1;
	  Tank1.y = Tank1.y + 1;
	  Tank1pic1.y = Tank1.y + 1;
	  Tank2.x = Tank2.x - 1;
	  Tank2pic1.x = Tank2.x - 1;
	  Tank2.y = Tank2.y - 1;
	  Tank2pic1.y = Tank2.y - 1;
	}
  }
  moveButton.update();
  moveButton2.update();
  TP.update();
  TP2.update();
if (Tank1.points >= numOfWaves && Tank2.points < numOfWaves) {
moveButton3.update();
DeathTxt.update();
background.color = "black";
win = true;
 }
  if (Tank2.points >= numOfWaves && Tank1.points < numOfWaves) {
moveButton3.update();
DeathTxt2.update();
background.color = "black";
win = true;
 }
  if (Tank1.points >= numOfWaves && Tank2.points >= numOfWaves) {
DeathTxt3.update();
background.color = "black";
win = true;
 }
if (Tank1.points < numOfWaves || Tank2.points < numOfWaves) {
background.color = "rgb("+redC+", "+greenC+", "+blueC+")";
 }
if (win == true) {
upgradeMenu = 0;
}
  if (upgradeMenu == 0) {
    okG.style.display = "none";
	upgrades.style.display = "none";
	if (pause == false) {
	pauseG.style.display = "initial";
	}
  }
  if (upgradeMenu == 1 && Tank1.points < numOfWaves && Tank2.points < numOfWaves) {
    okG.style.display = "initial";
	upgrades.style.display = "initial";
	pauseG.style.display = "none";
	background.update();
	MenuText = new component("", 0, 0, MenuColor, window.innerWidth / 2 - 85, 50, "text");
	MenuText.font = "36px Arial";
	PointText = new component("", 0, 0, MenuColor, window.innerWidth / 2 - 110, 85, "text");
	PointText.font = "36px Arial";
	if (Tank1.UpgradeTurn == true) {
	MenuText.text = "Blue's Turn!";
	PointText.text = "Blue's Points: " + Tank1.UpgradePoints;
	MenuColor = "blue";
	} else {
	MenuText.text = "Red's Turn!";
	PointText.text = "Red's Points: " + Tank2.UpgradePoints;
	MenuColor = "red";
	 }
	MenuText.update();
	PointText.update();
	}
if (win == true && button3_down == true) {
	winReset();
 }
}

function winReset() {
if (win == true) {
var redC = document.getElementById('red').value;
var greenC = document.getElementById('green').value;
var blueC = document.getElementById('blue').value;
 _bullets.length[0];
 dirSwitch = 0;
 dirSwitch2 = 0;
 button_down = false;
 button2_down = false;
 Tank1.angle = 0;
 Tank2.angle = 0;
 Tank1.bulletSize = 2;
 Tank2.bulletSize = 2;
 upgradeMenu = 0;
 background.color = "rgb("+redC+", "+greenC+", "+blueC+")";
 Tank1.dead = false;
 Tank2.dead = false;
 Tank1.points = 0;
 Tank2.points = 0;
 Tank1.UpgradePoints = 0;
 Tank2.UpgradePoints = 0;
 Tank1.UpgradeTurn = false;
 Tank2.UpgradeTurn = false;
 Tank1.color = "blue";
 Tank2.color = "red";
 Tank1.x = 50;
 Tank1.y = 120;
 Tank2.x = window.innerWidth - 50;
 Tank2.y = window.innerHeight - 120;
 Tank1.speed = 0;
 Tank2.speed = 0;
 win = false;
 }
} setTimeout(winReset, 1000);

function collision2(a,b){
return a.x - a.width/2 < b.x + b.width &&
a.x + a.width/2 > b.x &&
a.y < b.y + b.height &&
a.y + a.height > b.y;
}

var button_down = false, button2_down = false, button3_down = false;

function getTouchXY(e) {
  for(var i = 0; i < e.changedTouches.length; i++) {
	var x = e.changedTouches[i].clientX,
		y = e.changedTouches[i].clientY,
		t = {x:x, y:y, width:10, height:10};

  if(collision2(t, moveButtonDetect)) { button_down = true; moveButton.color = "darkblue";}
  if(collision2(t, moveButtonDetect2)) { button2_down = true; moveButton2.color = "darkred";}
  if(collision2(t, moveButtonDetect3)) { button3_down = true; moveButton3.color = "darkpurple";}
}
}

function stopTouchXY(e){
  var x = e.changedTouches[0].clientX,
	  y = e.changedTouches[0].clientY,
	  t = {x:x, y:y, width:10, height:10};

  if(collision2(t, moveButtonDetect)) { button_down = false; moveButton.color = "blue";}
  if(collision2(t, moveButtonDetect2)) {button2_down = false; moveButton2.color = "red";}
  if(collision2(t, moveButtonDetect3)) {button3_down = false; moveButton3.color = "purple";}
}

window.addEventListener("touchstart",  getTouchXY);
window.addEventListener("touchmove",   getTouchXY);
window.addEventListener("touchend",	stopTouchXY);
window.addEventListener("touchcancel", stopTouchXY);

document.onkeydown = function(e) {
    switch (e.keyCode) {
        case 87:
        button_down = true; 
        moveButton.color = "darkblue";		
            break;
        case 38:
        button2_down = true;
        moveButton2.color = "darkred";		
            break;
		case 32:
        if (win == true) {
        winReset();
        moveButton3.color = "darkpurple";
        }	
        break;
    }
};
document.onkeyup = function(e) {
    switch (e.keyCode) {
		case 87:
        button_down = false;  
        moveButton.color = "blue";		
            break;
		case 38:
        button2_down = false;
        moveButton2.color = "red";		
            break;
		case 32:
        if (win == true) {
        moveButton3.color = "purple";
        }	
        break;
    }
};
</script>
</body>
</html>
